!function(n){"use strict";function e(n,e,t){return t.a=n,t.f=e,t}function u(t){return e(2,t,function(e){return function(n){return t(e,n)}})}function t(r){return e(3,r,function(t){return function(e){return function(n){return r(t,e,n)}}})}function r(a){return e(4,a,function(r){return function(t){return function(e){return function(n){return a(r,t,e,n)}}}})}function a(i){return e(5,i,function(a){return function(r){return function(t){return function(e){return function(n){return i(a,r,t,e,n)}}}}})}function i(o){return e(6,o,function(i){return function(a){return function(r){return function(t){return function(e){return function(n){return o(i,a,r,t,e,n)}}}}}})}function o(u){return e(7,u,function(o){return function(i){return function(a){return function(r){return function(t){return function(e){return function(n){return u(o,i,a,r,t,e,n)}}}}}}})}function s(s){return e(8,s,function(u){return function(o){return function(i){return function(a){return function(r){return function(t){return function(e){return function(n){return s(u,o,i,a,r,t,e,n)}}}}}}}})}function c(c){return e(9,c,function(s){return function(u){return function(o){return function(i){return function(a){return function(r){return function(t){return function(e){return function(n){return c(s,u,o,i,a,r,t,e,n)}}}}}}}}})}function p(n,e,t){return 2===n.a?n.f(e,t):n(e)(t)}function g(n,e,t,r){return 3===n.a?n.f(e,t,r):n(e)(t)(r)}function l(n,e,t,r,a){return 4===n.a?n.f(e,t,r,a):n(e)(t)(r)(a)}function $(n,e,t,r,a,i){return 5===n.a?n.f(e,t,r,a,i):n(e)(t)(r)(a)(i)}function h(n,e,t,r,a,i,o){return 6===n.a?n.f(e,t,r,a,i,o):n(e)(t)(r)(a)(i)(o)}function m(n,e,t,r,a,i,o,u){return 7===n.a?n.f(e,t,r,a,i,o,u):n(e)(t)(r)(a)(i)(o)(u)}var v={$:0};function b(n,e){return{$:1,a:n,b:e}}var f=u(b);function w(n){for(var e=v,t=n.length;t--;)e=b(n[t],e);return e}function d(n){for(var e=[];n.b;n=n.b)e.push(n.a);return e}var x=t(function(n,e,t){for(var r=[];e.b&&t.b;e=e.b,t=t.b)r.push(p(n,e.a,t.a));return w(r)});r(function(n,e,t,r){for(var a=[];e.b&&t.b&&r.b;e=e.b,t=t.b,r=r.b)a.push(g(n,e.a,t.a,r.a));return w(a)}),a(function(n,e,t,r,a){for(var i=[];e.b&&t.b&&r.b&&a.b;e=e.b,t=t.b,r=r.b,a=a.b)i.push(l(n,e.a,t.a,r.a,a.a));return w(i)}),i(function(n,e,t,r,a,i){for(var o=[];e.b&&t.b&&r.b&&a.b&&i.b;e=e.b,t=t.b,r=r.b,a=a.b,i=i.b)o.push($(n,e.a,t.a,r.a,a.a,i.a));return w(o)}),u(function(t,n){return w(d(n).sort(function(n,e){return T(t(n),t(e))}))}),u(function(r,n){return w(d(n).sort(function(n,e){var t=p(r,n,e);return t===Ee?0:t===qe?-1:1}))});function y(n,e){for(var t,r=[],a=k(n,e,0,r);a&&(t=r.pop());a=k(t.a,t.b,0,r));return a}function k(n,e,t,r){if(100<t)return r.push(E(n,e)),!0;if(n===e)return!0;if("object"!=typeof n||null===n||null===e)return"function"==typeof n&&C(5),!1;for(var a in n.$<0&&(n=_e(n),e=_e(e)),n)if(!k(n[a],e[a],t+1,r))return!1;return!0}u(y),u(function(n,e){return!y(n,e)});function T(n,e,t){if("object"!=typeof n)return n===e?0:n<e?-1:1;if(!n.$)return(t=T(n.a,e.a))?t:(t=T(n.b,e.b))?t:T(n.c,e.c);for(;n.b&&e.b&&!(t=T(n.a,e.a));n=n.b,e=e.b);return t||(n.b?1:e.b?-1:0)}u(function(n,e){return T(n,e)<0}),u(function(n,e){return T(n,e)<1}),u(function(n,e){return 0<T(n,e)}),u(function(n,e){return 0<=T(n,e)});var L=u(function(n,e){var t=T(n,e);return t<0?qe:t?Se:Ee}),M=0;function E(n,e){return{a:n,b:e}}function S(n,e,t){return{a:n,b:e,c:t}}function q(n){return n}function I(n,e){var t={};for(var r in n)t[r]=n[r];for(var r in e)t[r]=e[r];return t}u(A);function A(n,e){if("string"==typeof n)return n+e;if(!n.b)return e;var t=b(n.a,e);n=n.b;for(var r=t;n.b;n=n.b)r=r.b=b(n.a,e);return t}var _=t(function(n,e,t){for(var r=new Array(n),a=0;a<n;a++)r[a]=t(e+a);return r}),D=u(function(n,e){for(var t=new Array(n),r=0;r<n&&e.b;r++)t[r]=e.a,e=e.b;return t.length=r,E(t,e)}),R=(u(function(n,e){return e[n]}),t(function(n,e,t){for(var r=t.length,a=new Array(r),i=0;i<r;i++)a[i]=t[i];return a[n]=e,a}),u(function(n,e){for(var t=e.length,r=new Array(t+1),a=0;a<t;a++)r[a]=e[a];return r[t]=n,r}),t(function(n,e,t){for(var r=t.length,a=0;a<r;a++)e=p(n,t[a],e);return e}),t(function(n,e,t){for(var r=t.length-1;0<=r;r--)e=p(n,t[r],e);return e}));u(function(n,e){for(var t=e.length,r=new Array(t),a=0;a<t;a++)r[a]=n(e[a]);return r}),t(function(n,e,t){for(var r=t.length,a=new Array(r),i=0;i<r;i++)a[i]=p(n,e+i,t[i]);return a}),t(function(n,e,t){return t.slice(n,e)}),t(function(n,e,t){var r=e.length,a=n-r;a>t.length&&(a=t.length);for(var i=new Array(r+a),o=0;o<r;o++)i[o]=e[o];for(o=0;o<a;o++)i[o+r]=t[o];return i}),u(function(n,e){return e}),u(function(n,e){return console.log(n+": <internals>"),e});function C(n){throw new Error("https://github.com/elm/core/blob/1.0.0/hints/"+n+".md")}u(function(n,e){return n+e}),u(function(n,e){return n-e}),u(function(n,e){return n*e}),u(function(n,e){return n/e}),u(function(n,e){return n/e|0}),u(Math.pow),u(function(n,e){return e%n});var j=u(function(n,e){var t=e%n;return 0===n?C(11):0<t&&n<0||t<0&&0<n?t+n:t});Math.PI,Math.E,Math.cos,Math.sin,Math.tan,Math.acos,Math.asin,Math.atan,u(Math.atan2);var X=Math.ceil,N=Math.floor,H=(Math.round,Math.sqrt,Math.log);isNaN;u(function(n,e){return n&&e}),u(function(n,e){return n||e}),u(function(n,e){return n!==e});var P=u(function(n,e){return n+e});u(function(n,e){return n+e});u(function(n,e){for(var t=e.length,r=new Array(t),a=0;a<t;){var i=e.charCodeAt(a);55296<=i&&i<=56319?(r[a]=n(q(e[a]+e[a+1])),a+=2):(r[a]=n(q(e[a])),a++)}return r.join("")}),u(function(n,e){for(var t=[],r=e.length,a=0;a<r;){var i=e[a],o=e.charCodeAt(a);a++,55296<=o&&o<=56319&&(i+=e[a],a++),n(q(i))&&t.push(i)}return t.join("")});t(function(n,e,t){for(var r=t.length,a=0;a<r;){var i=t[a],o=t.charCodeAt(a);a++,55296<=o&&o<=56319&&(i+=t[a],a++),e=p(n,q(i),e)}return e}),t(function(n,e,t){for(var r=t.length;r--;){var a=t[r],i=t.charCodeAt(r);56320<=i&&i<=57343&&(a=t[--r]+a),e=p(n,q(a),e)}return e});var W=u(function(n,e){return e.split(n)}),O=u(function(n,e){return e.join(n)}),z=t(function(n,e,t){return t.slice(n,e)});u(function(n,e){for(var t=e.length;t--;){var r=e[t],a=e.charCodeAt(t);if(56320<=a&&a<=57343&&(r=e[--t]+r),n(q(r)))return!0}return!1}),u(function(n,e){for(var t=e.length;t--;){var r=e[t],a=e.charCodeAt(t);if(56320<=a&&a<=57343&&(r=e[--t]+r),!n(q(r)))return!1}return!0});var B=u(function(n,e){return-1<e.indexOf(n)}),F=u(function(n,e){return 0===e.indexOf(n)}),J=(u(function(n,e){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}),u(function(n,e){var t=n.length;if(t<1)return v;for(var r=0,a=[];-1<(r=e.indexOf(n,r));)a.push(r),r+=t;return w(a)}));function G(n){return n+""}var Y=a(function(n,e,t,r,a){for(var i=n.length,o=e+i<=a.length,u=0;o&&u<i;){var s=a.charCodeAt(e);o=n[u++]===a[e++]&&(10===s?(t++,r=1):(r++,55296==(63488&s)?n[u++]===a[e++]:1))}return S(o?e:-1,t,r)}),K=t(function(n,e,t){return t.length<=e?-1:55296==(63488&t.charCodeAt(e))?n(q(t.substr(e,2)))?e+2:-1:n(q(t[e]))?"\n"===t[e]?-2:e+1:-1}),U=(t(function(n,e,t){return t.charCodeAt(e)===n}),u(function(n,e){for(;n<e.length;n++){var t=e.charCodeAt(n);if(t<48||57<t)return n}return n}),t(function(n,e,t){for(var r=0;e<t.length;e++){var a=t.charCodeAt(e)-48;if(a<0||n<=a)break;r=n*r+a}return E(e,r)}),u(function(n,e){for(var t=0;n<e.length;n++){var r=e.charCodeAt(n);if(48<=r&&r<=57)t=16*t+r-48;else if(65<=r&&r<=70)t=16*t+r-55;else{if(!(97<=r&&r<=102))break;t=16*t+r-87}}return E(n,t)}),a(function(n,e,t,r,a){for(var i=a.indexOf(n,e),o=i<0?a.length:i+n.length;e<o;){var u=a.charCodeAt(e++);10===u?(r=1,t++):(r++,55296==(63488&u)&&e++)}return S(i,t,r)}));var V=u(function(n,e){return{$:10,d:n,b:e}});u(function(n,e){return{$:11,e:n,b:e}});function Q(n,e){return{$:13,f:n,g:e}}var Z=u(function(n,e){return{$:14,b:e,h:n}});var nn=u(function(n,e){return Q(n,[e])}),en=t(function(n,e,t){return Q(n,[e,t])}),tn=(r(function(n,e,t,r){return Q(n,[e,t,r])}),a(function(n,e,t,r,a){return Q(n,[e,t,r,a])}),i(function(n,e,t,r,a,i){return Q(n,[e,t,r,a,i])}),o(function(n,e,t,r,a,i,o){return Q(n,[e,t,r,a,i,o])}),s(function(n,e,t,r,a,i,o,u){return Q(n,[e,t,r,a,i,o,u])}),c(function(n,e,t,r,a,i,o,u,s){return Q(n,[e,t,r,a,i,o,u,s])}),u(function(n,e){try{return rn(n,JSON.parse(e))}catch(n){return Dt(p(ko,"This is not valid JSON! "+n.message,fn(e)))}}),u(function(n,e){return rn(n,hn(e))}));function rn(n,e){switch(n.$){case 3:return"boolean"==typeof e?Rt(e):un("a BOOL",e);case 2:return"number"!=typeof e?un("an INT",e):-2147483647<e&&e<2147483647&&(0|e)===e?Rt(e):!isFinite(e)||e%1?un("an INT",e):Rt(e);case 4:return"number"==typeof e?Rt(e):un("a FLOAT",e);case 6:return"string"==typeof e?Rt(e):e instanceof String?Rt(e+""):un("a STRING",e);case 9:return null===e?Rt(n.c):un("null",e);case 5:return Rt(fn(e));case 7:return Array.isArray(e)?an(n.b,e,w):un("a LIST",e);case 8:return Array.isArray(e)?an(n.b,e,on):un("an ARRAY",e);case 10:var t=n.d;if("object"!=typeof e||null===e||!(t in e))return un("an OBJECT with a field named `"+t+"`",e);var r=rn(n.b,e[t]);return io(r)?r:Dt(p(To,t,r.a));case 11:var a=n.e;if(!Array.isArray(e))return un("an ARRAY",e);if(a>=e.length)return un("a LONGER array. Need index "+a+" but only see "+e.length+" entries",e);r=rn(n.b,e[a]);return io(r)?r:Dt(p(Lo,a,r.a));case 12:if("object"!=typeof e||null===e||Array.isArray(e))return un("an OBJECT",e);var i=v;for(var o in e)if(e.hasOwnProperty(o)){r=rn(n.b,e[o]);if(!io(r))return Dt(p(To,o,r.a));i=b(E(o,r.a),i)}return Rt(Ce(i));case 13:for(var u=n.f,s=n.g,c=0;c<s.length;c++){r=rn(s[c],e);if(!io(r))return r;u=u(r.a)}return Rt(u);case 14:r=rn(n.b,e);return io(r)?rn(n.h(r.a),e):r;case 15:for(var f=v,h=n.g;h.b;h=h.b){r=rn(h.a,e);if(io(r))return r;f=b(r.a,f)}return Dt(Mo(Ce(f)));case 1:return Dt(p(ko,n.a,fn(e)));case 0:return Rt(n.a)}}function an(n,e,t){for(var r=e.length,a=new Array(r),i=0;i<r;i++){var o=rn(n,e[i]);if(!io(o))return Dt(p(Lo,i,o.a));a[i]=o.a}return Rt(t(a))}function on(e){return p(yo,e.length,function(n){return e[n]})}function un(n,e){return Dt(p(ko,"Expecting "+n,fn(e)))}function sn(n,e){if(n===e)return!0;if(n.$!==e.$)return!1;switch(n.$){case 0:case 1:return n.a===e.a;case 3:case 2:case 4:case 6:case 5:return!0;case 9:return n.c===e.c;case 7:case 8:case 12:return sn(n.b,e.b);case 10:return n.d===e.d&&sn(n.b,e.b);case 11:return n.e===e.e&&sn(n.b,e.b);case 13:return n.f===e.f&&cn(n.g,e.g);case 14:return n.h===e.h&&sn(n.b,e.b);case 15:return cn(n.g,e.g)}}function cn(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(!sn(n[r],e[r]))return!1;return!0}u(function(n,e){return JSON.stringify(hn(e),null,n)});function fn(n){return n}function hn(n){return n}t(function(n,e,t){return t[n]=hn(e),t});fn(null);function ln(n){return{$:0,a:n}}function dn(n){return{$:2,b:n,c:null}}var mn=u(function(n,e){return{$:3,b:n,d:e}});u(function(n,e){return{$:4,b:n,d:e}});var bn=0;function pn(n){var e={$:0,e:bn++,f:n,g:null,h:[]};return yn(e),e}function gn(e){return dn(function(n){n(ln(pn(e)))})}function vn(n,e){n.h.push(e),yn(n)}var wn=u(function(e,t){return dn(function(n){vn(e,t),n(ln(M))})});var $n=!1,xn=[];function yn(n){if(xn.push(n),!$n){for($n=!0;n=xn.shift();)kn(n);$n=!1}}function kn(e){for(;e.f;){var n=e.f.$;if(0===n||1===n){for(;e.g&&e.g.$!==n;)e.g=e.g.i;if(!e.g)return;e.f=e.g.b(e.f.a),e.g=e.g.i}else{if(2===n)return void(e.f.c=e.f.b(function(n){e.f=n,yn(e)}));if(5===n){if(0===e.h.length)return;e.f=e.f.b(e.h.shift())}else e.g={$:3===n?0:1,b:e.f.b,i:e.g},e.f=e.f.d}}}r(function(n,e,t,r){return Tn(e,r,n.bx,n.bP,n.bM,function(){return function(){}})});function Tn(n,e,t,r,a,i){var o=p(tn,n,fn(e?e.flags:void 0));io(o)||C(2,o.a);var u={},s=(o=t(o.a)).a,c=i(h,s),f=function(n,e){var t;for(var r in Ln){var a=Ln[r];a.a&&((t=t||{})[r]=a.a(r,e)),n[r]=En(a,e)}return t}(u,h);function h(n,e){o=p(r,n,s),c(s=o.a,e),An(u,o.b,a(s))}return An(u,o.b,a(s)),f?{ports:f}:{}}var Ln={};function Mn(n,e,t,r,a){return{b:n,c:e,d:t,e:r,f:a}}function En(n,e){var r={g:e,h:void 0},a=n.c,i=n.d,o=n.e,u=n.f;return r.h=pn(p(mn,function n(t){return p(mn,n,{$:5,b:function(n){var e=n.a;return 0===n.$?g(i,r,e,t):o&&u?l(a,r,e.i,e.j,t):g(a,r,o?e.i:e.j,t)}})},n.b))}var Sn=u(function(e,t){return dn(function(n){e.g(t),n(ln(M))})});u(function(n,e){return p(wn,n.h,{$:0,a:e})});function qn(e){return function(n){return{$:1,k:e,l:n}}}function In(n){return{$:2,m:n}}u(function(n,e){return{$:3,n:n,o:e}});function An(n,e,t){var r={};for(var a in _n(!0,e,r,null),_n(!1,t,r,null),n)vn(n[a],{$:"fx",a:r[a]||{i:v,j:v}})}function _n(n,e,t,r){switch(e.$){case 1:var a=e.k,i=(f=n,h=a,l=r,d=e.l,p(f?Ln[h].e:Ln[h].f,function(n){for(var e=l;e;e=e.q)n=e.p(n);return n},d));return void(t[a]=(u=n,s=i,c=(c=t[a])||{i:v,j:v},u?c.i=b(s,c.i):c.j=b(s,c.j),c));case 2:for(var o=e.m;o.b;o=o.b)_n(n,o.a,t,r);return;case 3:return void _n(n,e.o,t,{p:e.n,q:r})}var u,s,c,f,h,l,d}u(function(n,e){return e});var Dn;u(function(e,t){return function(n){return e(t(n))}});var Rn="undefined"!=typeof document?document:{};function Cn(n,e){n.appendChild(e)}r(function(n,e,t,r){var a=r.node;return a.parentNode.replaceChild(Vn(n,function(){}),a),{}});function jn(n){return{$:0,a:n}}var Xn=u(function(i,o){return u(function(n,e){for(var t=[],r=0;e.b;e=e.b){var a=e.a;r+=a.b||0,t.push(a)}return r+=t.length,{$:1,c:o,d:Kn(n),e:t,f:i,b:r}})})(void 0),Nn=u(function(i,o){return u(function(n,e){for(var t=[],r=0;e.b;e=e.b){var a=e.a;r+=a.b.b||0,t.push(a)}return r+=t.length,{$:2,c:o,d:Kn(n),e:t,f:i,b:r}})})(void 0);u(function(n,e){return{$:4,j:n,k:e,b:1+(e.b||0)}});function Hn(n,e){return{$:5,l:n,m:e,k:void 0}}u(function(n,e){return Hn([n,e],function(){return n(e)})}),t(function(n,e,t){return Hn([n,e,t],function(){return p(n,e,t)})}),r(function(n,e,t,r){return Hn([n,e,t,r],function(){return g(n,e,t,r)})}),a(function(n,e,t,r,a){return Hn([n,e,t,r,a],function(){return l(n,e,t,r,a)})}),i(function(n,e,t,r,a,i){return Hn([n,e,t,r,a,i],function(){return $(n,e,t,r,a,i)})}),o(function(n,e,t,r,a,i,o){return Hn([n,e,t,r,a,i,o],function(){return h(n,e,t,r,a,i,o)})}),s(function(n,e,t,r,a,i,o,u){return Hn([n,e,t,r,a,i,o,u],function(){return m(n,e,t,r,a,i,o,u)})}),c(function(c,f,h,l,d,m,b,p,g){return Hn([c,f,h,l,d,m,b,p,g],function(){return e=f,t=h,r=l,a=d,i=m,o=b,u=p,s=g,8===(n=c).a?n.f(e,t,r,a,i,o,u,s):n(e)(t)(r)(a)(i)(o)(u)(s);var n,e,t,r,a,i,o,u,s})});var Pn=u(function(n,e){return{$:"a0",n:n,o:e}}),Wn=u(function(n,e){return{$:"a1",n:n,o:e}}),On=u(function(n,e){return{$:"a2",n:n,o:e}}),zn=u(function(n,e){return{$:"a3",n:n,o:e}});t(function(n,e,t){return{$:"a4",n:e,o:{f:n,o:t}}});function Bn(n){return"script"==n?"p":n}function Fn(n){return/^\s*(javascript:|data:text\/html)/i.test(n)?"":n}u(function(n,e){return"a0"===e.$?p(Pn,e.n,(t=n,r=e.o,a=Io(r),{$:r.$,a:a?g(So,a<3?Gn:Yn,qo(t),r.a):p(Eo,t,r.a)})):e;var t,r,a});var Jn,Gn=u(function(n,e){return E(n(e.a),e.b)}),Yn=u(function(n,e){return{ak:n(e.ak),av:e.av,ar:e.ar}});function Kn(n){for(var e={};n.b;n=n.b){var t=n.a,r=t.$,a=t.n,i=t.o;if("a2"!==r){var o=e[r]||(e[r]={});"a3"===r&&"class"===a?Un(o,a,i):o[a]=i}else"className"===a?Un(e,a,hn(i)):e[a]=hn(i)}return e}function Un(n,e,t){var r=n[e];n[e]=r?r+" "+t:t}function Vn(n,e){var t=n.$;if(5===t)return Vn(n.k||(n.k=n.m()),e);if(0===t)return Rn.createTextNode(n.a);if(4===t){for(var r=n.k,a=n.j;4===r.$;)"object"!=typeof a?a=[a,r.j]:a.push(r.j),r=r.k;var i={j:a,p:e};return(o=Vn(r,i)).elm_event_node_ref=i,o}if(3===t)return Qn(o=n.h(n.g),e,n.d),o;var o=n.f?Rn.createElementNS(n.f,n.c):Rn.createElement(n.c);Dn&&"a"==n.c&&o.addEventListener("click",Dn(o)),Qn(o,e,n.d);for(var u=n.e,s=0;s<u.length;s++)Cn(o,Vn(1===t?u[s]:u[s].b,e));return o}function Qn(n,e,t){for(var r in t){var a=t[r];"a1"===r?Zn(n,a):"a0"===r?te(n,e,a):"a3"===r?ne(n,a):"a4"===r?ee(n,a):("value"!==r||n[r]!==a)&&(n[r]=a)}}function Zn(n,e){var t=n.style;for(var r in e)t[r]=e[r]}function ne(n,e){for(var t in e){var r=e[t];r?n.setAttribute(t,r):n.removeAttribute(t)}}function ee(n,e){for(var t in e){var r=e[t],a=r.f,i=r.o;i?n.setAttributeNS(a,t,i):n.removeAttributeNS(a,t)}}function te(n,e,t){var r=n.elmFs||(n.elmFs={});for(var a in t){var i=t[a],o=r[a];if(i){if(o){if(o.q.$===i.$){o.q=i;continue}n.removeEventListener(a,o)}o=re(e,i),n.addEventListener(a,o,Jn&&{passive:Io(i)<2}),r[a]=o}else n.removeEventListener(a,o),r[a]=void 0}}try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){Jn=!0}}))}catch(n){}function re(f,n){function h(n){var e=h.q,t=rn(e.a,n);if(io(t)){for(var r,a=Io(e),i=t.a,o=a?a<3?i.a:i.ak:i,u=1==a?i.b:3==a&&i.av,s=(u&&n.stopPropagation(),(2==a?i.b:3==a&&i.ar)&&n.preventDefault(),f);r=s.j;){if("function"==typeof r)o=r(o);else for(var c=r.length;c--;)o=r[c](o);s=s.p}s(o,u)}}return h.q=n,h}function ae(n,e){var t=[];return oe(n,e,t,0),t}function ie(n,e,t,r){var a={$:e,r:t,s:r,t:void 0,u:void 0};return n.push(a),a}function oe(n,e,t,r){if(n!==e){var a=n.$,i=e.$;if(a!==i){if(1!==a||2!==i)return void ie(t,0,r,e);e=function(n){for(var e=n.e,t=e.length,r=new Array(t),a=0;a<t;a++)r[a]=e[a].b;return{$:1,c:n.c,d:n.d,e:r,f:n.f,b:n.b}}(e),i=1}switch(i){case 5:for(var o=n.l,u=e.l,s=o.length,c=s===u.length;c&&s--;)c=o[s]===u[s];if(c)return void(e.k=n.k);e.k=e.m();var f=[];return oe(n.k,e.k,f,0),void(0<f.length&&ie(t,1,r,f));case 4:for(var h=n.j,l=e.j,d=!1,m=n.k;4===m.$;)d=!0,"object"!=typeof h?h=[h,m.j]:h.push(m.j),m=m.k;for(var b=e.k;4===b.$;)d=!0,"object"!=typeof l?l=[l,b.j]:l.push(b.j),b=b.k;return d&&h.length!==l.length?void ie(t,0,r,e):((d?function(n,e){for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}(h,l):h===l)||ie(t,2,r,l),void oe(m,b,t,r+1));case 0:return void(n.a!==e.a&&ie(t,3,r,e.a));case 1:return void ue(n,e,t,r,ce);case 2:return void ue(n,e,t,r,fe);case 3:if(n.h!==e.h)return void ie(t,0,r,e);var p=se(n.d,e.d);p&&ie(t,4,r,p);var g=e.i(n.g,e.g);return void(g&&ie(t,5,r,g))}}}function ue(n,e,t,r,a){if(n.c===e.c&&n.f===e.f){var i=se(n.d,e.d);i&&ie(t,4,r,i),a(n,e,t,r)}else ie(t,0,r,e)}function se(n,e,t){var r,a,i;for(var o in n)if("a1"!==o&&"a0"!==o&&"a3"!==o&&"a4"!==o)if(o in e){var u=n[o],s=e[o];u===s&&"value"!==o||"a0"===t&&(i=s,(a=u).$==i.$&&sn(a.a,i.a))||((r=r||{})[o]=s)}else(r=r||{})[o]=t?"a1"===t?"":"a0"===t||"a3"===t?void 0:{f:n[o].f,o:void 0}:"string"==typeof n[o]?"":null;else{var c=se(n[o],e[o]||{},o);c&&((r=r||{})[o]=c)}for(var f in e)f in n||((r=r||{})[f]=e[f]);return r}function ce(n,e,t,r){var a=n.e,i=e.e,o=a.length,u=i.length;u<o?ie(t,6,r,{v:u,i:o-u}):o<u&&ie(t,7,r,{v:o,e:i});for(var s=o<u?o:u,c=0;c<s;c++){var f=a[c];oe(f,i[c],t,++r),r+=f.b||0}}function fe(n,e,t,r){for(var a=[],i={},o=[],u=n.e,s=e.e,c=u.length,f=s.length,h=0,l=0,d=r;h<c&&l<f;){var m=u[h],b=s[l],p=m.a,g=b.a,v=m.b,w=b.b;if(p!==g){var $=u[h+1],x=s[l+1];if($)var y=$.a,k=$.b,T=g===y;if(x)var L=x.a,M=x.b,E=p===L;if(E&&T)oe(v,M,a,++d),le(i,a,p,w,l,o),d+=v.b||0,de(i,a,p,k,++d),d+=k.b||0,h+=2,l+=2;else if(E)d++,le(i,a,g,w,l,o),oe(v,M,a,d),d+=v.b||0,h+=1,l+=2;else if(T)de(i,a,p,v,++d),d+=v.b||0,oe(k,w,a,++d),d+=k.b||0,h+=2,l+=1;else{if(!$||y!==L)break;de(i,a,p,v,++d),le(i,a,g,w,l,o),d+=v.b||0,oe(k,M,a,++d),d+=k.b||0,h+=2,l+=2}}else oe(v,w,a,++d),d+=v.b||0,h++,l++}for(;h<c;){d++;v=(m=u[h]).b;de(i,a,m.a,v,d),d+=v.b||0,h++}for(;l<f;){var S=S||[];le(i,a,(b=s[l]).a,b.b,void 0,S),l++}(0<a.length||0<o.length||S)&&ie(t,8,r,{w:a,x:o,y:S})}var he="_elmW6BL";function le(n,e,t,r,a,i){var o=n[t];if(!o)return o={c:0,z:r,r:a,s:void 0},i.push({r:a,A:o}),void(n[t]=o);if(1===o.c){i.push({r:a,A:o}),o.c=2;var u=[];return oe(o.z,r,u,o.r),o.r=a,void(o.s.s={w:u,A:o})}le(n,e,t+he,r,a,i)}function de(n,e,t,r,a){var i=n[t];if(i){if(0===i.c){i.c=2;var o=[];return oe(r,i.z,o,a),void ie(e,9,a,{w:o,A:i})}de(n,e,t+he,r,a)}else{var u=ie(e,9,a,void 0);n[t]={c:1,z:r,r:a,s:u}}}function me(n,e,t,r){!function n(e,t,r,a,i,o,u){var s=r[a];var c=s.r;for(;c===i;){var f=s.$;if(1===f)me(e,t.k,s.s,u);else if(8===f){s.t=e,s.u=u;var h=s.s.w;0<h.length&&n(e,t,h,0,i,o,u)}else if(9===f){s.t=e,s.u=u;var l=s.s;if(l){l.A.s=e;var h=l.w;0<h.length&&n(e,t,h,0,i,o,u)}}else s.t=e,s.u=u;if(!(s=r[++a])||(c=s.r)>o)return a}var d=t.$;if(4===d){for(var m=t.k;4===m.$;)m=m.k;return n(e,m,r,a,i+1,o,e.elm_event_node_ref)}var b=t.e;var p=e.childNodes;for(var g=0;g<b.length;g++){i++;var v=1===d?b[g]:b[g].b,w=i+(v.b||0);if(i<=c&&c<=w&&(a=n(p[g],v,r,a,i,w,u),!(s=r[a])||(c=s.r)>o))return a;i=w}return a}(n,e,t,0,0,e.b,r)}function be(n,e,t,r){return 0===t.length?n:(me(n,e,t,r),pe(n,t))}function pe(n,e){for(var t=0;t<e.length;t++){var r=e[t],a=r.t,i=ge(a,r);a===n&&(n=i)}return n}function ge(n,e){switch(e.$){case 0:return function(n,e,t){var r=n.parentNode,a=Vn(e,t);a.elm_event_node_ref||(a.elm_event_node_ref=n.elm_event_node_ref);r&&a!==n&&r.replaceChild(a,n);return a}(n,e.s,e.u);case 4:return Qn(n,e.u,e.s),n;case 3:return n.replaceData(0,n.length,e.s),n;case 1:return pe(n,e.s);case 2:return n.elm_event_node_ref?n.elm_event_node_ref.j=e.s:n.elm_event_node_ref={j:e.s,p:e.u},n;case 6:for(var t=e.s,r=0;r<t.i;r++)n.removeChild(n.childNodes[t.v]);return n;case 7:for(var a=(t=e.s).e,i=(r=t.v,n.childNodes[r]);r<a.length;r++)n.insertBefore(Vn(a[r],e.u),i);return n;case 9:if(!(t=e.s))return n.parentNode.removeChild(n),n;var o=t.A;return void 0!==o.r&&n.parentNode.removeChild(n),o.s=pe(n,t.w),n;case 8:return function(n,e){var t=e.s,r=function(n,e){if(!n)return;for(var t=Rn.createDocumentFragment(),r=0;r<n.length;r++){var a=n[r],i=a.A;Cn(t,2===i.c?i.s:Vn(i.z,e.u))}return t}(t.y,e);n=pe(n,t.w);for(var a=t.x,i=0;i<a.length;i++){var o=a[i],u=o.A,s=2===u.c?u.s:Vn(u.z,e.u);n.insertBefore(s,n.childNodes[o.r])}r&&Cn(n,r);return n}(n,e);case 5:return e.s(n);default:C(10)}}function ve(n){if(3===n.nodeType)return jn(n.textContent);if(1!==n.nodeType)return jn("");for(var e=v,t=n.attributes,r=t.length;r--;){var a=t[r],i=a.name,o=a.value;e=b(p(zn,i,o),e)}var u=n.tagName.toLowerCase(),s=v,c=n.childNodes;for(r=c.length;r--;)s=b(ve(c[r]),s);return g(Xn,u,e,s)}u(function(n,e){return n&e}),u(function(n,e){return n|e}),u(function(n,e){return n^e});u(function(n,e){return e<<n}),u(function(n,e){return e>>n}),u(function(n,e){return e>>>n});var we=u(function(n,e){var t="g";n.aU&&(t+="m"),n.aB&&(t+="i");try{return nt(new RegExp(e,t))}catch(n){return et}}),$e=(u(function(n,e){return null!==e.match(n)}),t(function(n,e,t){for(var r,a=[],i=0,o=t,u=e.lastIndex,s=-1;i++<n&&(r=e.exec(o))&&s!=e.lastIndex;){for(var c=r.length-1,f=new Array(c);0<c;){var h=r[c];f[--c]=h?nt(h):et}a.push(l(Js,r[0],r.index,i,w(f))),s=e.lastIndex}return e.lastIndex=u,w(a)}),r(function(a,n,i,e){var o=0;return e.replace(n,function(n){if(o++>=a)return n;for(var e=arguments.length-3,t=new Array(e);0<e;){var r=arguments[e];t[--e]=r?nt(r):et}return i(l(Js,n,arguments[arguments.length-2],o,w(t)))})}));t(function(n,e,t){for(var r=t,a=[],i=e.lastIndex,o=e.lastIndex;n--;){var u=e.exec(r);if(!u)break;a.push(r.slice(i,u.index)),i=e.lastIndex}return a.push(r.slice(i)),e.lastIndex=o,w(a)});u(function(t,r){return dn(function(n){var e=setInterval(function(){pn(r)},t);return function(){clearInterval(e)}})});var xe=r(function(e,n,t,u){return Tn(n,u,e.bx,e.bP,e.bM,function(r,n){var a=e.bR,i=u.node,o=ve(i);return ke(n,function(n){var e=a(n),t=ae(o,e);i=be(i,o,t,r),o=e})})}),ye=(r(function(e,n,t,r){return Tn(n,r,e.bx,e.bP,e.bM,function(a,n){var i=e.at&&e.at(a),o=e.bR,u=Rn.title,s=Rn.body,c=ve(s);return ke(n,function(n){Dn=i;var e=o(n),t=Xn("body")(v)(e.bi),r=ae(c,t);s=be(s,c,r,a),c=t,Dn=0,u!==e.bO&&(Rn.title=u=e.bO)})})}),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(n){setTimeout(n,1e3/60)});function ke(t,r){r(t);var a=0;function i(){a=1===a?0:(ye(i),r(t),1)}return function(n,e){t=n,e?(r(t),2===a&&(a=1)):(0===a&&ye(i),a=2)}}u(function(n,e){return p(eh,Ol,dn(function(){e&&history.go(e),n.a()}))}),u(function(n,e){return p(eh,Ol,dn(function(){history.pushState({},"",e),n.a()}))}),u(function(n,e){return p(eh,Ol,dn(function(){history.replaceState({},"",e),n.a()}))});var Te={addEventListener:function(){},removeEventListener:function(){}},Le=("undefined"!=typeof document&&document,"undefined"!=typeof window?window:Te);t(function(t,r,a){return gn(dn(function(n){function e(n){pn(a(n))}return t.addEventListener(r,e,Jn&&{passive:!0}),function(){t.removeEventListener(r,e)}}))}),u(function(n,e){var t=rn(n,e);return io(t)?nt(t.a):et});function Me(t,r){return dn(function(e){ye(function(){var n=document.getElementById(t);e(n?ln(r(n)):{$:1,a:Wl(t)})})})}u(function(e,n){return Me(n,function(n){return n[e](),M})});u(function(n,e){return t=function(){return Le.scroll(n,e),M},dn(function(n){ye(function(){n(ln(t()))})});var t});t(function(n,e,t){return Me(n,function(n){return n.scrollLeft=e,n.scrollTop=t,M})});u(function(n,e){return e(n)});var Ee=1,Se=2,qe=0,Ie=t(function(n,e,t){for(;;){if(-2===t.$)return e;var r=t.b,a=t.c,i=t.d,o=t.e,u=n,s=g(n,r,a,g(Ie,n,e,o));n=u,e=s,t=i}}),Ae=f,_e=function(n){return g(Ie,t(function(n,e,t){return p(Ae,E(n,e),t)}),v,n)},De=R,Re=(t(function(a,n,e){var t=e.c,r=e.d,i=u(function(n,e){if(n.$){var t=n.a;return g(De,a,e,t)}var r=n.a;return g(De,i,e,r)});return g(De,i,g(De,a,n,r),t)}),t(function(n,e,t){for(;;){if(!t.b)return e;var r=t.a,a=t.b,i=n,o=p(n,r,e);n=i,e=o,t=a}})),Ce=function(n){return g(Re,Ae,v,n)},je=r(function(n,e,t,r){if(r.b){var a=r.a,i=r.b;if(i.b){var o=i.a,u=i.b;if(u.b){var s=u.a,c=u.b;if(c.b){var f=c.a,h=c.b;return p(n,a,p(n,o,p(n,s,p(n,f,500<t?g(Re,n,e,Ce(h)):l(je,n,e,t+1,h)))))}return p(n,a,p(n,o,p(n,s,e)))}return p(n,a,p(n,o,e))}return p(n,a,e)}return e}),Xe=t(function(n,e,t){return l(je,n,e,0,t)}),Ne=u(function(n,e){for(;;){if(!e.b)return!1;var t=e.a,r=e.b;if(n(t))return!0;n=n,e=r}}),He=u(function(e,n){return p(Ne,function(n){return y(n,e)},n)}),Pe=u(function(n,e){return p(He,n,w(["equation","align","eqnarray"]))||We(e)}),We=function(n){n:for(;;)switch(n.$){case 0:case 1:t=n.a;return!1;case 2:n.a;n=n.b;continue n;case 3:case 4:t=n.a;return!0;case 6:t=n.a,n.b;var e=n.c;return g(Xe,u(function(n,e){return We(n)||e}),!1,e);case 5:t=n.a,n.b,e=n.c,n.d;return g(Xe,u(function(n,e){return We(n)||e}),!1,e);case 7:var t=n.a,r=(e=n.b,n.c);return p(Pe,t,r);case 8:var a=n.a;return g(Xe,u(function(n,e){return We(n)||e}),!1,a);default:return!1}},Oe=function(n){return g(Xe,u(function(n,e){return We(n)||e}),!1,n)},ze={$:0},Be=u(function(n,e){var t=E(n,e);n:for(;;){e:for(;;)switch(t.a){case"":return e;case"\n":switch(t.b){case"":break n;case"\n":default:break e}default:switch(t.b){case"":break n;case"\n":return n+"\n";default:return t.a+"\n"+t.b}}return"\n"+e}return n}),Fe={$:4},Je={$:3},Ge=function(n){return{$:2,a:n}},Ye={$:1},Ke={$:0},Ue={$:1},Ve={$:2},Qe=u(function(n,e){return n(e)}),Ze=function(n){return n},nt=function(n){return{$:0,a:n}},et={$:1},tt=z,rt=u(function(n,e){return n<1?e:g(tt,0,-n,e)}),at=function(n){return n.length},it=t(function(n,e,t){return{$:0,a:n,b:e,c:t}}),ot=function(o){return function(n){var e=$(U,o,n.b,n.bI,n.bn,n.a),t=e.a,r=e.b,a=e.c,i=t<0?at(n.a):t;return g(it,T(n.b,i)<0,0,{bn:a,aD:n.aD,c:n.c,b:i,bI:r,a:n.a})}},ut=u(function(n,e){return n}),st=u(function(n,e){return{$:1,a:n,b:e}}),ct=u(function(o,n){var u=n;return function(n){var e=u(n);if(1===e.$){var t=e.a,r=e.b;return p(st,t,r)}t=e.a;var a=e.b,i=e.c;return g(it,t,p(o,g(tt,n.b,i.b,n.a),a),i)}}),ft=function(n){return p(ct,ut,n)},ht=t(function(h,n,e){var l=n,d=e;return function(n){var e=l(n);if(1===e.$){var t=e.a,r=e.b;return p(st,t,r)}var a=e.a,i=e.b,o=e.c,u=d(o);if(1===u.$){var s=u.a;r=u.b;return p(st,a||s,r)}s=u.a;var c=u.b,f=u.c;return g(it,a||s,p(h,i,c),f)}}),lt=u(function(n,e){return g(ht,ut,n,e)}),dt=u(function(n,e){return g(ht,Qe,n,e)}),mt=u(function(o,n){var u=n;return function(n){var e=u(n);if(e.$){r=e.a;var t=e.b;return p(st,r,t)}var r=e.a,a=e.b,i=e.c;return g(it,r,o(a),i)}}),bt=function(e){return function(n){return g(it,!1,e,n)}},pt=u(function(n,e){return{$:0,a:n,b:e}}),gt=function(n){return""===n},vt=u(function(n,e){return{$:1,a:n,b:e}}),wt={$:0},$t=r(function(n,e,t,r){return{bn:e,bo:r,as:t,bI:n}}),xt=u(function(n,e){return p(vt,wt,l($t,n.bI,n.bn,e,n.aD))}),yt=Y,kt=function(n){var i=n.a,o=n.b,u=!gt(i);return function(n){var e=$(yt,i,n.b,n.bI,n.bn,n.a),t=e.a,r=e.b,a=e.c;return y(t,-1)?p(st,!1,p(xt,n,o)):g(it,u,0,{bn:a,aD:n.aD,c:n.c,b:t,bI:r,a:n.a})}},Tt=function(n){return kt(p(pt,n,{$:8,a:n}))},Lt=function(n){return p(mt,rt(at(n)),ft(p(dt,bt(Ze),p(lt,ot(n),Tt(n)))))},Mt=K,Et=a(function(n,e,t,r,a){for(;;){var i=g(Mt,n,e,a.a);if(y(i,-1))return g(it,T(a.b,e)<0,0,{bn:r,aD:a.aD,c:a.c,b:e,bI:t,a:a.a});if(y(i,-2))n=n,e=e+1,t=t+1,r=1,a=a;else n=n,e=i,t=t,r=r+1,a=a}}),St=function(e){return function(n){return $(Et,e,n.b,n.bI,n.bn,n)}},qt=St,It=qt(function(n){return" "===n}),At=p(dt,p(lt,p(lt,bt(Ze),It),Tt("\\begin{")),Lt("}")),_t=u(function(t,n){return g(Xe,u(function(n,e){return p(Ae,t(n),e)}),v,n)}),Dt=function(n){return{$:1,a:n}},Rt=function(n){return{$:0,a:n}},Ct=t(function(n,e,t){return{bn:e,as:t,bI:n}}),jt=function(n){return g(Ct,n.bI,n.bn,n.as)},Xt=u(function(n,e){n:for(;;)switch(n.$){case 0:return e;case 1:var t=n.a,r=n.b;n=t,e=p(Ae,r,e);continue n;default:t=n.a;var a=n.b;n=t,e=p(Xt,a,e);continue n}}),Nt=u(function(n,e){var t=n({bn:1,aD:v,c:1,b:0,bI:1,a:e});if(t.$){var r=t.b;return Dt(p(Xt,r,v))}var a=t.b;return Rt(a)}),Ht=u(function(n,e){var t=p(Nt,n,e);if(t.$){var r=t.a;return Dt(p(_t,jt,r))}var a=t.a;return Rt(a)}),Pt=qt(function(n){return" "===n||"\n"===n}),Wt=p(dt,p(lt,p(lt,bt(Ze),It),Tt("\\end{")),p(lt,Lt("}"),Pt)),Ot=F,zt=function(n){return""===n?Ke:"\\begin{thebibliography}"===n||"\\end{thebibliography}"===n?Ue:p(Ot,"\\begin",n)?(t=p(Ht,At,n),{$:3,a:t.$?"":t.a}):p(Ot,"\\end",n)?(e=p(Ht,Wt,n),{$:4,a:e.$?"":e.a}):Ve;var e,t},Bt=u(function(n,e){var t=E(e,zt(n));n:for(;;)switch(t.a.$){case 0:switch(t.b.$){case 0:t.a,t.b;return ze;case 2:t.a,t.b;return Ye;case 3:t.a;var r=t.b.a;return Ge(r);case 1:t.a,t.b;return Je;default:break n}case 3:switch(t.b.$){case 0:t.a,t.b;return ze;case 2:t.a,t.b;return Ye;case 3:t.a,r=t.b.a;return Ge(r);default:break n}case 2:switch(t.b.$){case 0:r=t.a.a,t.b;return Ge(r);case 2:r=t.a.a,t.b;return Ge(r);case 3:r=t.a.a,t.b.a;return Ge(r);case 4:var a=t.a.a;return y(a,t.b.a)?ze:Ge(a);default:break n}case 1:switch(t.b.$){case 2:t.a,t.b;return Ye;case 3:t.a,t.b.a;return Ye;case 4:t.a,r=t.b.a;return Ye;case 0:t.a,t.b;return ze;default:break n}default:break n}return Fe}),Ft=u(function(n,e){var t,r=p(Bt,n,e.x);switch(r.$){case 0:return I(e,{k:"",P:A(e.P,w([p(Be,e.k,n)])),x:r});case 1:return I(e,{k:p(Be,e.k,n),x:r});case 2:r.a;return I(e,{k:p(Be,e.k,(t=n,""===t?"\n":t)),x:r});case 3:return I(e,{x:r});default:return e}}),Jt=u(function(n,e){return w(p(W,n,e))}),Gt=u(function(t,n){return g(Xe,u(function(n,e){return t(n)?p(Ae,n,e):e}),v,n)}),Yt=function(n){var e=g(Re,Ft,{k:"",P:v,x:ze},p(Jt,"\n",n+"\n"));return p(_t,function(n){return n+"\n\n\n"},p(Gt,function(n){return""!==n},A(e.P,w([e.k]))))},Kt=function(n){return{$:0,a:n}},Ut=function(n){return{$:8,a:n}},Vt=t(function(n,e,t){return{$:7,a:n,b:e,c:t}}),Qt=function(n){return{$:4,a:n}},Zt=p(dt,p(lt,p(lt,bt(Qt),It),Tt("\\[")),Lt("\\]")),nr=p(dt,p(lt,p(lt,bt(Qt),It),Tt("$$")),p(lt,Lt("$$"),Pt)),er=function(n){return{$:3,a:n}},tr=function(n){return p(dt,p(lt,bt(er),Tt("$")),p(lt,Lt("$"),n))},rr=t(function(n,e,t){return{$:6,a:n,b:e,c:t}}),ar={$:11},ir=u(function(t,r){return function(n){var e=g(Mt,t,n.b,n.a);return y(e,-1)?p(st,!1,p(xt,n,r)):g(it,!0,0,y(e,-2)?{bn:1,aD:n.aD,c:n.c,b:n.b+1,bI:n.bI+1,a:n.a}:{bn:n.bn+1,aD:n.aD,c:n.c,b:e,bI:n.bI,a:n.a})}}),or=function(n){return p(ir,n,ar)},ur=function(n){return g(it,!1,n.b,n)},sr=function(n){return g(it,!1,n.a,n)},cr=function(n){return p(dt,p(dt,p(dt,p(lt,bt(tt),Pt),p(lt,p(lt,p(lt,ur,or(n)),qt(n)),Pt)),ur),sr)},fr=cr(function(n){return!("\\"===n||"$"===n||"}"===n||" "===n||"\n"===n)}),hr=u(function(n,e){return{$:2,a:n,b:e}}),lr=t(function(n,e,t){n:for(;;){if(t.b){var r=t.a,a=t.b,i=r(n);if(i.$){var o,u=(o=i).a,s=o.b;if(u)return o;n=n,e=p(hr,e,s),t=a;continue n}return o=i}return p(st,!1,e)}}),dr=function(e){return function(n){return g(lr,n,wt,e)}},mr=u(function(n,e){return dr(w([p(dt,bt(function(n){return{$:0,a:p(Ae,n,e)}}),n),p(mt,function(n){return{$:1,a:Ce(e)}},bt(0))]))}),br=function(n){if(n.$){var e=n.a;return{$:1,a:e}}var t=n.a;return{$:0,a:t}},pr=r(function(n,e,t,r){for(;;){var a=t(e)(r);if(a.$){o=a.a;var i=a.b;return p(st,n||o,i)}var o=a.a,u=a.b,s=a.c;if(u.$){var c=u.a;return g(it,n||o,c,s)}n=n||o,e=u.a,t=t,r=s}}),gr=u(function(e,t){return function(n){return l(pr,!1,e,t,n)}}),vr=u(function(n,e){return p(gr,n,function(n){return p(mt,br,e(n))})}),wr=u(function(n,e){return p(vr,n,mr(e))}),$r=u(function(h,n){var l=n;return function(n){var e=l(n);if(1===e.$){var t=e.a,r=e.b;return p(st,t,r)}var a=e.a,i=e.b,o=e.c,u=h(i)(o);if(1===u.$){var s=u.a;r=u.b;return p(st,a||s,r)}s=u.a;var c=u.b,f=u.c;return g(it,a||s,c,f)}}),xr=function(e){return p($r,function(n){return p(wr,w([n]),e)},e)},yr=u(function(n,e){return p(O,n,d(e))}),kr=p(mt,Kt,p(mt,yr(" "),xr(fr))),Tr=function(n){var e=n.charCodeAt(0);return 55296<=e&&e<=56319?1024*(e-55296)+n.charCodeAt(1)-56320+65536:e},Lr=function(n){return 97<=(r=Tr(n))&&r<=122||((t=Tr(n))<=90&&65<=t||(e=Tr(n))<=57&&48<=e);var e,t,r},Mr={$:-2},Er=Mr,Sr=Er,qr=a(function(n,e,t,r,a){return{$:-1,a:n,b:e,c:t,d:r,e:a}}),Ir=L,Ar=a(function(n,e,t,r,a){if(-1!==a.$||a.a){if(-1!==r.$||r.a||-1!==r.d.$||r.d.a)return $(qr,n,e,t,r,a);r.a,m=r.b,b=r.c;var i=r.d,o=(i.a,i.b),u=i.c,s=i.d,c=i.e;g=r.e;return $(qr,0,m,b,$(qr,1,o,u,s,c),$(qr,1,e,t,g,a))}a.a;var f=a.b,h=a.c,l=a.d,d=a.e;if(-1!==r.$||r.a)return $(qr,n,f,h,$(qr,0,e,t,r,l),d);r.a;var m=r.b,b=r.c,p=r.d,g=r.e;return $(qr,0,e,t,$(qr,1,m,b,p,g),$(qr,1,f,h,l,d))}),_r=t(function(n,e,t){if(-2===t.$)return $(qr,0,n,e,Mr,Mr);var r=t.a,a=t.b,i=t.c,o=t.d,u=t.e;switch(p(Ir,n,a)){case 0:return $(Ar,r,a,i,g(_r,n,e,o),u);case 1:return $(qr,r,a,e,o,u);default:return $(Ar,r,a,i,o,g(_r,n,e,u))}}),Dr=t(function(n,e,t){var r=g(_r,n,e,t);if(-1!==r.$||r.a)return r;r.a;var a=r.b,i=r.c,o=r.d,u=r.e;return $(qr,1,a,i,o,u)}),Rr=u(function(n,e){return g(Dr,n,0,e)}),Cr=function(n){return g(Re,Rr,Sr,n)},jr=u(function(n,e){return n<1?e:g(tt,n,at(e),e)}),Xr={$:7},Nr=u(function(n,e){n:for(;;){if(-2===e.$)return et;var t=e.b,r=e.c,a=e.d,i=e.e;switch(p(Ir,n,t)){case 0:n=n,e=a;continue n;case 1:return nt(r);default:n=n,e=i;continue n}}}),Hr=u(function(n,e){return!p(Nr,n,e).$}),Pr=u(function(n,e){return p(Hr,n,e)}),Wr=o(function(n,e,t,r,a,i,o){for(;;){var u=g(Mt,n,e,a);if(y(u,-1))return{bn:r,aD:o,c:i,b:e,bI:t,a:a};if(y(u,-2))n=n,e=e+1,t=t+1,r=1,a=a,i=i,o=o;else n=n,e=u,t=t,r=r+1,a=a,i=i,o=o}}),Or=function(n){return a={aJ:Xr,aO:n.aO,a3:n.a3,a8:n.a8},function(n){var e=g(Mt,a.a8,n.b,n.a);if(y(e,-1))return p(st,!1,p(xt,n,a.aJ));var t=y(e,-2)?m(Wr,a.aO,n.b+1,n.bI+1,1,n.a,n.c,n.aD):m(Wr,a.aO,e,n.bI,n.bn+1,n.a,n.c,n.aD),r=g(tt,n.b,t.b,n.a);return p(Pr,r,a.a3)?p(st,!1,p(xt,n,a.aJ)):g(it,!0,r,t)};var a},zr=p(mt,jr(1),Or({aO:function(n){return Lr(n)},a3:Cr(w(["\\begin","\\end","\\item","\\bibitem"])),a8:function(n){return"\\"===n}})),Br=cr(function(n){return!("\\"===n||"$"===n||"]"===n||" "===n||"\n"===n)}),Fr=p(mt,Kt,p(mt,yr(" "),xr(Br))),Jr=function(n){return p(wr,v,n)},Gr=p(mt,Ut,p(dt,p(lt,bt(Ze),Tt("[")),p(lt,Jr(dr(w([Fr,tr(It)]))),Tt("]")))),Yr=function(e){return function(n){return e(0)(n)}},Kr=function(n){return p(dt,p(dt,p(dt,bt(rr),zr),Jr(Gr)),p(lt,Jr(Ur()),n))};function Ur(){return p(mt,Ut,p(dt,p(lt,bt(Ze),Tt("{")),p(lt,Jr(dr(w([kr,tr(It),Yr(function(n){return Kr(It)})]))),Tt("}"))))}var Vr=Ur();Ur=function(){return Vr};var Qr=u(function(n,e){return{$:2,a:n,b:e}}),Zr=p(mt,Kt,p(mt,yr(" "),xr(cr(function(n){return!(" "===n||"\n"===n||"\\"===n||"$"===n)})))),na=p(dt,p(lt,bt(Ze),Pt),p(lt,Zr,Pt)),ea=p(mt,function(n){return p(Qr,1,Ut(n))},p(dt,p(lt,p(lt,p(lt,p(lt,bt(Ze),It),Tt("\\item")),Tt(" ")),It),p(lt,Jr(dr(w([na,tr(Pt),Kr(Pt)]))),Pt))),ta=u(function(n,e){return p(mt,p(Vt,e,v),p(mt,Ut,p(dt,p(lt,bt(Ze),Pt),p(lt,p(lt,p(lt,Jr(ea),Pt),Tt(n)),Pt))))}),ra=u(function(n,e){return p(mt,p(Vt,e,v),p(mt,Kt,p(dt,bt(Ze),p(lt,Lt(n),Pt))))}),aa=cr(function(n){return!(" "===n||"\n"===n||"\\"===n||"$"===n||"&"===n)}),ia=p(mt,Kt,p(mt,yr(" "),xr(aa))),oa=p(dt,bt(Ze),dr(w([tr(Pt),ia]))),ua=p(dt,p(lt,p(lt,bt(Ze),Tt("&")),It),oa),sa=function(e){return dr(w([p($r,function(n){return sa(p(Ae,n,e))},ua),bt(Ce(e))]))},ca=p(mt,Ut,p(dt,p(lt,bt(Ze),It),p(lt,p(lt,p($r,function(n){return sa(w([n]))},oa),It),dr(w([Tt("\n"),Tt("\\\\\n")]))))),fa=p(mt,Ut,p(dt,p(lt,bt(Ze),Pt),xr(ca))),ha=u(function(n,e){return p(dt,p(dt,p(lt,bt(Vt(e)),Pt),Jr(Vr)),p(lt,p(lt,p(lt,fa,Pt),Tt(n)),Pt))}),la=function(n){return g(Re,u(function(n,e){var t=n.a,r=n.b;return g(Dr,t,r,e)}),Er,n)},da=la(w([E("enumerate",u(function(n,e){return p(ta,n,e)})),E("itemize",u(function(n,e){return p(ta,n,e)})),E("tabular",u(function(n,e){return p(ha,n,e)})),E("passThrough",u(function(n,e){return p(ra,n,e)}))])),ma=r(function(n,e,t,r){return{$:5,a:n,b:e,c:t,d:r}}),ba=p(mt,function(n){return Ut(n)},p(dt,p(lt,bt(Ze),It),p(lt,xr(dr(w([ia,tr(It),Kr(It)]))),Tt("\n\n")))),pa=Or({aO:function(n){return Lr(n)},a3:Cr(w(["\\begin","\\end","\\item"])),a8:function(n){return"\\"===n}}),ga=p(dt,p(dt,p(dt,p(dt,bt(ma),pa),Jr(Gr)),Jr(Vr)),ba),va=p(mt,function(n){return{$:1,a:n}},ft(p(lt,p(lt,p(lt,p(lt,bt(0),or(function(n){return"%"===n})),qt(function(n){return"\n"!==n})),or(function(n){return"\n"===n})),Pt))),wa=function(n){var e="\\end{"+n+"}",t=p(He,n,w(["equation","align","eqnarray","verbatim","listing","verse"]))?"passThrough":n;return g($a,t,e,n)},$a=t(function(n,e,t){var r=p(Nr,n,da);return r.$?p(xa,e,t):p(r.a,e,t)}),xa=u(function(n,e){return p(mt,p(Vt,e,v),p(mt,Ut,p(dt,p(lt,bt(Ze),Pt),p(lt,p(lt,p(lt,xr(ka()),Pt),Tt(n)),Pt))))});function ya(){return p($r,wa,At)}function ka(){return dr(w([va,nr,Zt,tr(Pt),Kr(Pt),ga,na,Yr(function(n){return ya()})]))}var Ta=ya();ya=function(){return Ta};var La=ka();ka=function(){return La};var Ma=p(mt,Ut,p(dt,p(lt,bt(Ze),Pt),xr(La))),Ea=function(n){var e,t=p(Ht,Ma,n);if(t.$){var r=t.a;return w([(e=r,{$:9,a:e})])}return 8===t.a.$?t.a.a:w([Kt("yada!")])},Sa=function(n){return p(_t,Ea,Yt(n))},qa=i(function(n,e,t,r,a,i){return{C:r,bA:t,Z:i,_:a,ap:n,aa:e}}),Ia={r:la(w([E("s1",0),E("s2",0),E("s3",0),E("tno",0),E("eqno",0)])),aE:Er,aG:Er,bb:v},Aa=h(qa,v,v,Ia,v,et,et),_a=r(function(n,e,t,r){return{u:e,N:t,y:n,H:r}}),Da=function(n){switch(n.$){case 6:return{u:e=n.a,N:t=n.b,y:"macro",H:r=n.c};case 5:var e=n.a,t=n.b,r=n.c;n.d;return{u:e,N:t,y:"smacro",H:r};case 7:return{u:e=n.a,N:r=n.b,y:"env",H:w([n.c])};default:return{u:"null",N:v,y:"null",H:v}}},Ra=t(function(n,e,t){var r=t.aG;return I(t,{aG:g(Dr,n,e,r)})}),Ca=function(n){if(n.b){var e=n.a;n.b;return nt(e)}return et},ja=function(n){var e;return(e=Ca(n)).$?Ut(v):e.a},Xa=function(n){return(e=ja(8===(t=ja(n)).$?t.a:w([Kt("Error getting value of LatexList")]))).$?"Error getting value of LatexString":e.a;var e,t},Na=u(function(n,e){var t=Xa(n.H),r=y(n.N,v)?t:Xa(n.N);return g(Ra,"bibitem:"+t,r,e)}),Ha=u(function(n,e){var t=Xa(n.H);return g(Ra,n.u,t,e)}),Pa=u(function(n,e){var t=p(Nr,n,e.r);return t.$?0:t.a}),Wa=function(n){if(-1===n.$&&-1===n.d.$&&-1===n.e.$){if(-1!==n.e.d.$||n.e.d.a){n.a,a=n.b,i=n.c;var e=n.d,t=(e.a,u=e.b,s=e.c,c=e.d,f=e.e,n.e);t.a,l=t.b,d=t.c,r=t.d,v=t.e;return $(qr,1,a,i,$(qr,0,u,s,c,f),$(qr,0,l,d,r,v))}n.a;var r,a=n.b,i=n.c,o=n.d,u=(o.a,o.b),s=o.c,c=o.d,f=o.e,h=n.e,l=(h.a,h.b),d=h.c,m=((r=h.d).a,r.b),b=r.c,p=r.d,g=r.e,v=h.e;return $(qr,0,m,b,$(qr,1,a,i,$(qr,0,u,s,c,f),p),$(qr,1,l,d,g,v))}return n},Oa=function(n){if(-1===n.$&&-1===n.d.$&&-1===n.e.$){if(-1!==n.d.d.$||n.d.d.a){n.a,a=n.b,i=n.c;var e=n.d,t=(e.a,u=e.b,s=e.c,e.d),r=(m=e.e,n.e);r.a,p=r.b,g=r.c,v=r.d,w=r.e;return $(qr,1,a,i,$(qr,0,u,s,t,m),$(qr,0,p,g,v,w))}n.a;var a=n.b,i=n.c,o=n.d,u=(o.a,o.b),s=o.c,c=o.d,f=(c.a,c.b),h=c.c,l=c.d,d=c.e,m=o.e,b=n.e,p=(b.a,b.b),g=b.c,v=b.d,w=b.e;return $(qr,0,u,s,$(qr,1,f,h,l,d),$(qr,1,a,i,m,$(qr,0,p,g,v,w)))}return n},za=o(function(n,e,t,r,a,i,o){if(-1!==i.$||i.a){n:for(;;){if(-1===o.$&&1===o.a){if(-1===o.d.$){if(1===o.d.a){o.a,o.d.a;return Oa(e)}break n}o.a,o.d;return Oa(e)}break n}return e}i.a;var u=i.b,s=i.c,c=i.d,f=i.e;return $(qr,t,u,s,c,$(qr,0,r,a,f,o))}),Ba=function(n){if(-1===n.$&&-1===n.d.$){var e=n.a,t=n.b,r=n.c,a=n.d,i=a.a,o=a.d,u=n.e;if(1===i){if(-1!==o.$||o.a){var s=Wa(n);if(-1===s.$){var c=s.a,f=s.b,h=s.c,l=s.d,d=s.e;return $(Ar,c,f,h,Ba(l),d)}return Mr}o.a;return $(qr,e,t,r,Ba(a),u)}return $(qr,e,t,r,Ba(a),u)}return Mr},Fa=u(function(n,e){if(-2===e.$)return Mr;var t=e.a,r=e.b,a=e.c,i=e.d,o=e.e;if(T(n,r)<0){if(-1===i.$&&1===i.a){i.a;var u=i.d;if(-1!==u.$||u.a){var s=Wa(e);if(-1===s.$){var c=s.a,f=s.b,h=s.c,l=s.d,d=s.e;return $(Ar,c,f,h,p(Fa,n,l),d)}return Mr}u.a;return $(qr,t,r,a,p(Fa,n,i),o)}return $(qr,t,r,a,p(Fa,n,i),o)}return p(Ja,n,m(za,n,e,t,r,a,i,o))}),Ja=u(function(n,e){if(-1===e.$){var t=e.a,r=e.b,a=e.c,i=e.d,o=e.e;if(y(n,r)){var u=function(n){for(;;){if(-1!==n.$||-1!==n.d.$)return n;n=n.d}}(o);if(-1===u.$){var s=u.b,c=u.c;return $(Ar,t,s,c,i,Ba(o))}return Mr}return $(Ar,t,r,a,i,p(Fa,n,o))}return Mr}),Ga=u(function(n,e){var t=p(Fa,n,e);if(-1!==t.$||t.a)return t;t.a;var r=t.b,a=t.c,i=t.d,o=t.e;return $(qr,1,r,a,i,o)}),Ya=t(function(n,e,t){var r=e(p(Nr,n,t));if(r.$)return p(Ga,n,t);var a=r.a;return g(Dr,n,a,t)}),Ka=u(function(n,e){if(e.$)return et;var t=e.a;return nt(n(t))}),Ua=u(function(n,e){var t=Ka(function(n){return n+1});return I(e,{r:g(Ya,n,t,e.r)})}),Va=t(function(n,e,t){var r=t.aE;return I(t,{aE:g(Dr,n,e,r)})}),Qa=function(n){return 8===n.$?n.a:v},Za=u(function(n,e){if(6===e.$){var t=e.a,r=(e.b,e.c);return y(t,n)?p(_t,Qa,r):v}return v}),ni=function(n){var e=Ca(n),t=e.$?Kt(""):e.a;return t.$?"":t.a},ei=u(function(n,e){return p(_t,ni,p(Za,n,e))}),ti=u(function(n,e){var t=Ca(p(ei,n,e));return t.$?"":t.a}),ri=function(n){return n.trim()},ai=u(function(n,e){return e.$?n:e.a}),ii=G,oi=u(function(n,e){var t=p(Ua,"eqno",e),r=p(Pa,"s1",t),a=p(Pa,"eqno",t),i=p(ai,g(rr,"NULL",v,v),Ca(n.H)),o=i.$?"":function(n){var e=p(Ht,Kr(Pt),ri(n));if(e.$)return"";var t=e.a;return p(ti,"label",t)}(i.a);return""!==o?g(Va,o,ii(r)+"."+ii(a),t):t}),ui=t(function(n,e,t){var r=Ka(function(n){return e});return I(t,{r:g(Ya,n,r,t.r)})}),si=u(function(n,e){for(;;){if(n<=0)return e;if(!e.b)return e;e.a;n=n-1,e=e.b}}),ci=u(function(n,e){return n<0?et:Ca(p(si,n,e))}),fi=u(function(n,e){return p(ai,"xxx",p(ci,n,e))}),hi=function(n){for(var e=0,t=n.charCodeAt(0),r=43==t||45==t?1:0,a=r;a<n.length;++a){var i=n.charCodeAt(a);if(i<48||57<i)return et;e=10*e+i-48}return a==r?et:nt(45==t?-e:e)},li=u(function(n,e){var t=p(_t,ni,p(_t,Qa,n.H)),r=p(fi,1,t),a="section"===p(fi,0,t)?p(ai,0,hi(r)):-1;return 0<T(a,-1)?g(ui,"s3",0,g(ui,"s2",0,g(ui,"s1",a-1,e))):e}),di=u(function(n,e){var t=p(Ua,"tno",e),r=p(Pa,"s1",t),a=p(Pa,"tno",t),i=p(ti,"label",p(ai,g(rr,"NULL",v,v),Ca(n.H)));return""!==i?g(Va,i,ii(r)+"."+ii(a),t):t}),mi=t(function(n,e,t){return{bz:e,bB:t,u:n}}),bi=r(function(n,e,t,r){var a=g(mi,n,e,t);return I(r,{bb:A(r.bb,w([a]))})}),pi=u(function(n,e){var t=ii(p(Pa,"s1",e)+1);return l(bi,Xa(n.H),t,1,g(ui,"s3",0,g(ui,"s2",0,p(Ua,"s1",e))))}),gi=u(function(n,e){var t=ii(p(Pa,"s2",e)+1),r=ii(p(Pa,"s1",e))+"."+t;return l(bi,Xa(n.H),r,2,g(ui,"s3",0,p(Ua,"s2",e)))}),vi=u(function(n,e){var t=ii(p(Pa,"s3",e)+1),r=ii(p(Pa,"s2",e)),a=ii(p(Pa,"s1",e))+"."+r+"."+t;return l(bi,Xa(n.H),a,2,p(Ua,"s3",e))}),wi=la(w([E(E("macro","setcounter"),u(function(n,e){return p(li,n,e)})),E(E("macro","section"),u(function(n,e){return p(pi,n,e)})),E(E("macro","subsection"),u(function(n,e){return p(gi,n,e)})),E(E("macro","subsubsection"),u(function(n,e){return p(vi,n,e)})),E(E("macro","title"),u(function(n,e){return p(Ha,n,e)})),E(E("macro","author"),u(function(n,e){return p(Ha,n,e)})),E(E("macro","date"),u(function(n,e){return p(Ha,n,e)})),E(E("macro","email"),u(function(n,e){return p(Ha,n,e)})),E(E("macro","revision"),u(function(n,e){return p(Ha,n,e)})),E(E("env","theorem"),u(function(n,e){return p(di,n,e)})),E(E("env","proposition"),u(function(n,e){return p(di,n,e)})),E(E("env","lemma"),u(function(n,e){return p(di,n,e)})),E(E("env","definition"),u(function(n,e){return p(di,n,e)})),E(E("env","corollary"),u(function(n,e){return p(di,n,e)})),E(E("env","equation"),u(function(n,e){return p(oi,n,e)})),E(E("env","align"),u(function(n,e){return p(oi,n,e)})),E(E("smacro","bibitem"),u(function(n,e){return p(Na,n,e)}))])),$i=function(n){var e=n.a,t=n.b,r=p(Nr,E(e,t),wi);return r.$?u(function(n,e){return e}):r.a},xi=u(function(n,e){var t=p(ai,l(_a,"null","null",v,v),p(Ka,Da,Ca(n)));w([Ut(w([Kt("section")])),Ut(w([Kt("7")]))]);return g($i,E(t.y,t.u),t,e)}),yi=p(r(function(n,e,t,r){var a=n(t),i=r,o=i.a,u=p(e,a,i.b);return E(A(o,w([a])),u)}),Ea,xi),ki=u(function(n,e){return g(Re,yi,E(v,n),e)}),Ti=u(function(n,e){return p(ki,n,e)}),Li=r(function(n,e,t,r){var a=r,i=a.a,o=p(e,t,a.b);return E(A(i,w([p(n,o,t)])),o)}),Mi=t(function(n,e,t){return g(Re,p(Li,n,xi),E(v,e),t)}),Ei=t(function(n,e,t){return p(Mi(n),e,t)}),Si=u(function(n,e){return"p."+ii(n)+"."+ii(e)}),qi=function(n){return g(Re,u(function(n,e){return e+1}),0,n)},Ii=t(function(n,e,t){for(;;){if(!(T(n,e)<1))return t;var r=n,a=e-1,i=p(Ae,e,t);n=r,e=a,t=i}}),Ai=u(function(n,e){return g(Ii,n,e,v)}),_i=t(function(n,e,t){var r,a=Yt(t),i=(r=a,p(_t,Si(0),p(Ai,1,qi(r)))),o=p(Ti,Ia,a),u=o.a,s=o.b,c=I(Ia,{aE:s.aE,aG:s.aG,bb:s.bb}),f=p(Ei(n),c,u).a;return h(qa,a,f,c,i,et,et)}),Di=r(function(n,e,t,r){return{ae:n,af:e,aS:t,an:r}}),Ri=t(function(n,e,t){for(;;){if(n<=0)return t;if(!e.b)return t;var r=e.a;n=n-1,e=e.b,t=p(Ae,r,t)}}),Ci=u(function(n,e){return Ce(g(Ri,n,e,v))}),ji=t(function(n,e,t){if(e<=0)return v;var r=E(e,t);n:for(;;){e:for(;;){if(!r.b.b)return t;if(!r.b.b.b){if(1===r.a)break n;break e}switch(r.a){case 1:break n;case 2:var a=r.b;return w([o=a.a,f=a.b.a]);case 3:if(r.b.b.b.b){var i=r.b,o=i.a,u=i.b;return w([o,f=u.a,l=u.b.a])}break e;default:if(r.b.b.b.b&&r.b.b.b.b.b){var s=r.b,o=s.a,c=s.b,f=c.a,h=c.b,l=h.a,d=h.b,m=d.a,b=d.b;return p(Ae,o,p(Ae,f,p(Ae,l,p(Ae,m,1e3<n?p(Ci,e-4,b):g(ji,n+1,e-4,b)))))}break e}}return t}return w([o=r.b.a])}),Xi=u(function(n,e){return g(ji,0,n,e)}),Ni=u(function(n,e){if(y(n,v))return v;if(y(e,v))return v;var t=p(Xi,1,e),r=p(Xi,1,n);return y(r,t)?A(r,p(Ni,p(si,1,n),p(si,1,e))):v}),Hi=t(function(n,e,t){var r=qi(n),a=Ce(p(si,r,e)),i=Ce(p(si,r,t));return Ce(p(Ni,a,i))}),Pi=u(function(n,e){return Ce(p(si,n,Ce(e)))}),Wi=u(function(n,e){var t=p(Ni,n,e),r=g(Hi,t,n,e),a=qi(r),i=qi(t),o=y(i,qi(n))?v:r,u=p(Pi,a,p(si,i,n)),s=p(Pi,a,p(si,i,e));return l(Di,t,o,u,s)}),Oi=t(function(n,e,t){var r=qi(e.an),a=qi(e.aS),i=(qi(e.af),qi(e.ae)),o=p(si,i+a,t.C),u=p(_t,Si(n),p(Ai,i+1,i+r)),s=A(p(Xi,i,t.C),A(u,o)),c=r?E(nt(i),nt(i+r-1)):E(et,et),f=c.a;return{C:s,Z:c.b,_:f}}),zi=u(function(n,e){return Ce(p(Xi,n,Ce(e)))}),Bi=t(function(n,e,t){var r=p(_t,n,e.an),a=qi(e.af),i=p(zi,a,t.aa),o=qi(e.ae);return A(p(Xi,o,t.aa),A(r,i))}),Fi=r(function(n,e,t,r){var a=Yt(r),i=p(Wi,t.ap,a),o=g(Bi,e,i,t),u=g(Oi,n,i,t);return h(qa,a,o,Ia,u.C,u._,u.Z)}),Ji=r(function(n,e,t,r){return l(Fi,n,e(t.bA),t,r)}),Gi=a(function(n,e,t,r,a){return y((i=r).ap,v)&&y(i.aa,v)?p(_i(e),Ia,a):l(Ji,n,t,r,a);var i}),Yi=t(function(n,e,t){var r,a,i=(r=t.D,a=p(si,1,r.L),{W:Ca(p(si,1,a)),ad:r.X,X:r.W,L:a}),o=(p(si,1,t.D.L),n(t.D));return{D:i,O:p(Ae,o,t.O)}}),Ki=function(n){return{D:(e=n,{W:Ca(p(si,1,e)),ad:et,X:Ca(e),L:e}),O:v};var e},Ui=t(function(n,e,t){return g(Re,n,e,t)}),Vi=u(function(n,e){var t=Ki(e),r=g(Ui,n,t,e);return Ce(r.O)}),Qi=u(function(n,e){return p(Vi,Yi(n),e)}),Zi=u(function(n,e){return n<1?"":g(tt,0,n,e)}),no=Zi(1),eo=u(function(n,e){return n<1?"":g(tt,-n,at(e),e)}),to=eo(1),ro=function(n){var e=p(ai,Kt(""),n.W),t=p(ai,Kt(""),n.X),r=S(p(ai,Kt(""),n.ad),t,e);if(r.b.$)return t;switch(r.a.$){case 6:r.a;var a=r.b.a;return p(He,no(a),w([".",",","?","!",";",":"]))?Kt(a):Kt(" "+a);case 3:a=r.b.a;return p(He,no(a),w([".",",","?","!",";",":"]))?Kt(a):Kt(" "+a);default:a=r.b.a;return p(He,to(a),w([")",".",",","?","!",";",":"]))?Kt(a+" "):Kt(a)}},ao=function(r){return t(function(n,e,t){return p(r,n,t)})},io=function(n){return!n.$},oo=r(function(n,e,t,r){return{$:0,a:n,b:e,c:t,d:r}}),uo=X,so=u(function(n,e){return H(e)/H(n)}),co=uo(p(so,2,32)),fo=[],ho=l(oo,0,co,fo,fo),lo=D,mo=u(function(n,e){for(;;){var t=p(lo,32,n),r=t.a,a=t.b,i=p(Ae,{$:0,a:r},e);if(!a.b)return Ce(i);n=a,e=i}}),bo=u(function(n,e){for(;;){var t=uo(e/32);if(1===t)return p(lo,32,n).a;n=p(mo,n,v),e=t}}),po=N,go=u(function(n,e){return 0<T(n,e)?n:e}),vo=function(n){return n.length},wo=u(function(n,e){if(e.d){var t=32*e.d,r=po(p(so,32,t-1)),a=n?Ce(e.f):e.f,i=p(bo,a,e.d);return l(oo,vo(e.e)+t,p(go,5,r*co),i,e.e)}return l(oo,vo(e.e),co,fo,e.e)}),$o=_,xo=a(function(n,e,t,r,a){for(;;){if(e<0)return p(wo,!1,{f:r,d:t/32|0,e:a});var i={$:1,a:g($o,32,e,n)};n=n,e=e-32,t=t,r=p(Ae,i,r),a=a}}),yo=u(function(n,e){if(n<=0)return ho;var t=n%32,r=g($o,t,n-t,e);return $(xo,e,n-t-32,n,v,r)}),ko=u(function(n,e){return{$:3,a:n,b:e}}),To=u(function(n,e){return{$:0,a:n,b:e}}),Lo=u(function(n,e){return{$:1,a:n,b:e}}),Mo=function(n){return{$:2,a:n}},Eo=nn,So=en,qo=function(n){return{$:0,a:n}},Io=function(n){switch(n.$){case 0:return 0;case 1:return 1;case 2:return 2;default:return 3}},Ao=function(n){return Xn(Bn(n))},_o=u(function(n,e){return p(On,"innerHTML"==(t=n)||"formAction"==t?"data-"+t:t,Fn(e));var t}),Do=fn,Ro=function(n){return g(Ao,"math-text",w([p(_o,"content",Do(n))]),v)},Co=function(n){return Ro("$$\n"+ri(n)+"\n$$")},jo=Xn("span"),Xo=jn,No=function(n){return p(jo,v,w([Xo("{"),n,Xo("}")]))},Ho=u(function(n,e){return p(ai,Kt("xxx"),p(ci,n,e))}),Po=function(n){return Ro("$ "+ri(n)+" $")},Wo=Xo(" "),Oo=function(n){return'<div style="color: red">ERROR: '+(w([n]),'TODO deadEndsToString</div>\n<div style="color: blue">explanation_</div>')},zo=u(function(n,e){var t=p(yr,"\n",e);return"<div "+p(yr," ",n)+" >\n"+t+"\n</div>"}),Bo=Zi(1),Fo=eo(1),Jo=u(function(n,e){var t=Fo(n),r=Bo(e);return""===n?1:p(He,t,w(["("]))?1:p(He,r,w([")",".",",","?","!",";",":"]))?1:0}),Go=u(function(n,e){var t=e,r=t.a,a=t.b;return E(1===p(Jo,a,n)?A(r,n):r+" "+n,n)}),Yo=function(n){p(ai,"",Ca(n));return g(Re,Go,E("",""),n).a},Ko=u(function(n,e){return p(ai,Kt("xxx"),p(ci,n,e))}),Uo=t(function(n,e,t){return p(yr,e,p(Jt,n,t))}),Vo=u(function(n,e){return""}),Qo=function(n){if(8===n.$){var e=n.a;return"<table>\n"+g(Re,u(function(n,e){return e+" "+function(n){if(8===n.$){var e=n.a;return"<tr> "+g(Re,u(function(n,e){return e+" "+function(n){switch(n.$){case 0:return"<td>"+n.a+"</td>";case 3:return"<td>$"+n.a+"$</td>";default:return"<td>-</td>"}}(n)}),"",e)+" </tr>\n"}return"<tr>-</tr>"}(n)}),"",e)+"</table>\n"}return"<table>-</table>"},Zo=u(function(n,e){return Qo(e)}),nu=P,eu=t(function(n,e,t){return n<=0?t:g(eu,n>>1,A(e,e),1&n?A(t,e):t)}),tu=u(function(n,e){return g(eu,n,e,"")}),ru=t(function(n,e,t){return A(p(tu,n-at(t),p(nu,e,"")),t)}),au=u(function(n,e){return g(ru,2," ",ii(n))+" "+e}),iu=u(function(n,e){var t=e,r=t.a,a=t.b;return E(r+1,A(w([p(au,r+1,n)]),a))}),ou=function(n){return p(yr,"\n",Ce(g(Re,iu,E(0,v),p(Jt,"\n",ri(n))).b))},uu=function(n){var e=p(Nr,n,Nu());return e.$?pu(n):e.a},su=r(function(n,e,t,r){var a=p(Nr,n,Hu());return a.$?l(Xu,n,e,t,r):g(a.a,e,t,r)}),cu=u(function(n,e){switch(e.$){case 1:e.a;return"";case 6:var t=e.a,r=e.b,a=e.c;return l(Eu,n,t,r,a);case 5:t=e.a,r=e.b,a=e.c;var i=e.d;return $(Au,n,t,r,a,i);case 2:var o=e.a,u=e.b;return g(ku,n,o,u);case 3:return"$"+e.a+"$";case 4:return"$$"+e.a+"$$";case 7:t=e.a,a=e.b;var s=e.c;return l(wu,n,t,a,s);case 8:a=e.a;return p(Lu,n,a);case 0:return e.a;default:var c=e.a;return p(yr,"; ",p(_t,Oo,c))}}),fu=u(function(n,e){var t=p(Pa,"s1",n),r=g(Uo,"\\ \\","\\\\",p(cu,n,e)),a=p(Pa,"eqno",n);return"\n$$\n\\begin{align}\n"+(0<a?0<t?"\\tag{"+ii(t)+"."+ii(a)+"}":"\\tag{"+ii(a)+"}":"")+r+"\n\\end{align}\n$$\n"}),hu=t(function(n,e,t){return ri(p(cu,e,p(Ko,n,t)))}),lu=u(function(n,e){return p(yr,"",p(_t,function(n){return"{"+n+"}"},p(_t,cu(n),e)))}),du=r(function(n,e,t,r){var a=1===qi(e)?g(hu,0,n,e):g(hu,0,n,t);return' <p id="bib:'+a+'">['+a+"] "+p(cu,n,r)+"</p>\n"}),mu=u(function(n,e){return"bozo{"+g(hu,0,n,e)+"}{"+g(hu,1,n,e)+"}"}),bu=u(function(n,e){return'\n<div class="center" >\n'+p(cu,n,e)+"\n</div>\n"}),pu=r(function(n,e,t,r){return p(He,n,w(["theorem","proposition","corollary","lemma","definition"]))?l(Du,e,n,t,r):l(gu,e,n,t,r)}),gu=r(function(n,e,t,r){return'\n<div class="environment">\n<strong>'+e+"</strong>\n<div>\n"+p(cu,n,r)+"\n</div>\n</div>\n"}),vu=u(function(n,e){return"\n<ol>\n"+p(cu,n,e)+"\n</ol>\n"}),wu=r(function(n,e,t,r){return l(uu,e,n,t,r)}),$u=u(function(n,e){return"\n$$\n"+p(cu,n,e)+"\n$$\n"}),xu=u(function(n,e){var t=p(Pa,"s1",n),r=p(cu,n,e),a=p(Pa,"eqno",n);return"\n$$\n\\begin{equation}"+(0<a?0<t?"\\tag{"+ii(t)+"."+ii(a)+"}":"\\tag{"+ii(a)+"}":"")+r+"\\end{equation}\n$$\n"}),yu=u(function(n,e){return p(zo,w(['style="margin-left:2em"']),w([p(cu,n,e)]))}),ku=t(function(n,e,t){return'<li class="'+("item"+ii(e)+'">'+p(cu,n,t)+"</li>\n")}),Tu=u(function(n,e){return"\n<ul>\n"+p(cu,n,e)+"\n</ul>\n"}),Lu=u(function(n,e){return t=Yo(p(_t,cu(n),e)),g(Uo,"\\&","&#38",g(Uo,"--","&ndash;",g(Uo,"---","&mdash;",t)));var t}),Mu=u(function(n,e){var t=p(cu,n,e);return'\n<pre class="verbatim">'+ou(t)+"</pre>\n"}),Eu=r(function(n,e,t,r){return g(su(e),n,t,r)}),Su=u(function(n,e){return"\n$$\n"+p(cu,n,e)+"\n$$\n"}),qu=u(function(n,e){return p(yr,"",p(_t,function(n){return"["+n+"]"},p(_t,cu(n),e)))}),Iu=u(function(n,e){return p(zo,w(['class="quotation"']),w([p(cu,n,e)]))}),Au=a(function(n,e,t,r,a){var i=p(Nr,e,Pu());return i.$?'<span style="color: red;">\\'+e+p(lu,Ia,r)+" "+p(cu,n,a)+"</span>":l(i.a,n,t,r,a)}),_u=u(function(n,e){return p(zo,w(['style=""']),w([p(cu,n,e)]))}),Du=r(function(n,e,t,r){var a=p(Pa,"tno",n),i=p(Pa,"s1",n),o=0<i?" "+ii(i)+"."+ii(a):" "+ii(a),u=p(cu,n,r);p(Pa,"eqno",n);return'\n<div class="environment">\n<strong>'+e+o+'</strong>\n<div class="italic">\n'+u+"\n</div>\n</div>\n"}),Ru=u(function(n,e){return"\n$$\n"+p(cu,n,e)+"\n$$\n"}),Cu=u(function(n,e){return'\n<pre class="verbatim">'+g(Uo,"<","&lt;",g(Uo,">","&gt;",p(cu,n,e)))+"</pre>\n"}),ju=u(function(n,e){return p(zo,w(['class="verse"']),w([ri(p(cu,n,e))]))}),Xu=r(function(n,e,t,r){return'<span style="color: red;">\\'+n+p(qu,Ia,t)+p(lu,Ia,r)+"</span>"});function Nu(){return la(w([E("align",t(function(n,e,t){return p(fu,n,t)})),E("center",t(function(n,e,t){return p(bu,n,t)})),E("comment",t(function(n,e,t){return p(Vo,n,t)})),E("indent",t(function(n,e,t){return p(yu,n,t)})),E("enumerate",t(function(n,e,t){return p(vu,n,t)})),E("eqnarray",t(function(n,e,t){return p($u,n,t)})),E("equation",t(function(n,e,t){return p(xu,n,t)})),E("itemize",t(function(n,e,t){return p(Tu,n,t)})),E("listing",t(function(n,e,t){return p(Mu,n,t)})),E("macros",t(function(n,e,t){return p(Su,n,t)})),E("quotation",t(function(n,e,t){return p(Iu,n,t)})),E("tabular",t(function(n,e,t){return p(Zo,n,t)})),E("thebibliography",t(function(n,e,t){return p(_u,n,t)})),E("maskforweb",t(function(n,e,t){return p(Vo,n,t)})),E("useforweb",t(function(n,e,t){return p(Ru,n,t)})),E("verbatim",t(function(n,e,t){return p(Cu,n,t)})),E("verse",t(function(n,e,t){return p(ju,n,t)}))]))}function Hu(){return la(w([E("italic",t(function(n,e,t){return p(mu,n,t)}))]))}function Pu(){return la(w([E("bibitem",r(function(n,e,t,r){return l(du,n,e,t,r)}))]))}var Wu=Nu();Nu=function(){return Wu};var Ou=Hu();Hu=function(){return Ou};var zu=Pu();Pu=function(){return zu};var Bu=u(function(n,e){var t=p(Pa,"s1",n),r=p(cu,n,e),a=p(Pa,"eqno",n),i=0<a?0<t?"\\tag{"+ii(t)+"."+ii(a)+"}":"\\tag{"+ii(a)+"}":"";return Co("\n\\begin{align}\n"+i+r+"\n\\end{align}\n")}),Fu=u(function(n,e){return p(jo,v,v)}),Ju=Xn("br"),Gu=Xn("div"),Yu=u(function(n,e){return p(Gu,v,w([p(Ju,v,v)]))}),Ku=u(function(n,e){var t=p(Nr,n,e.aG);return t.$?"":t.a}),Uu=Xn("a"),Vu=u(function(n,e){return p(On,n,Do(e))}),Qu=function(n){return p(Vu,"href",/^\s*javascript:/i.test(e=n)?"":e);var e},Zu=u(function(n,e){var t=g(hu,0,n,e),r=p(Ku,"bibitem:"+t,n),a=""!==r?r:t;return p(jo,v,w([p(jo,v,w([Xo("[")])),p(Uu,w([Qu(a)]),w([Xo(a)])),p(jo,v,w([Xo("]")]))]))}),ns=u(function(n,e){return p(Gu,v,v)}),es=u(function(n,e){return p(jo,v,v)}),ts=Xn("li"),rs=Xn("ul"),as=Vu("className"),is=u(function(n,e){var t=p(Ku,"title",n),r=p(Gu,w([as("title")]),w([Xo(t)])),a=p(Ku,"revision",n),i=""!==a?"Last revised "+a:"",o=p(Ku,"email",n),u=p(Ku,"date",n),s=p(Ku,"author",n),c=p(_t,function(n){return p(ts,v,w([Xo(n)]))},p(Gt,function(n){return""!==n},w([s,o,u,i]))),f=p(rs,v,c);return p(Gu,v,w([r,f]))}),os=Xn("iframe"),us=function(n){return p(Vu,"src",Fn(n))},ss=function(n){return p(zn,"width",ii(n))},cs=u(function(n,e){var t,r=g(hu,1,n,e),a="xxx"===r?"Link to Ellie":r,i=g(hu,0,n,e);return p(os,w([us("https://ellie-app.com/embed/"+i),ss(500),(t=600,p(zn,"height",ii(t)))]),w([Xo(a)]))}),fs=u(function(n,e){return p(jo,v,v)}),hs=u(function(n,e){var t=p(Nr,n,e.aE);return t.$?"??":t.a}),ls=Xn("i"),ds=u(function(n,e){var t=g(hu,0,Ia,e),r=p(hs,t,n);return p(ls,v,w([Xo("("),Xo(r),Xo(")")]))}),ms=u(function(n,e){return Co(p(cu,n,e))}),bs=u(function(n,e){var t=p(Pa,"s1",n),r=p(cu,n,e),a=p(Pa,"eqno",n),i=0<a?0<t?"\\tag{"+ii(t)+"."+ii(a)+"}":"\\tag{"+ii(a)+"}":"";return Co("\\begin{equation}"+r+i+"\\end{equation}")}),ps=u(function(n,e){var t=g(hu,0,Ia,e),r=g(hu,1,Ia,e);return p(Uu,w([Qu(t)]),w([Xo(r)]))}),gs=t(function(n,e,t){return{bg:t,bt:e,ax:n}}),vs=u(function(n,e){return E(n,e)}),ws=St(function(n){return" "===n||"\n"===n||"\r"===n}),$s=p(mt,function(n){var e=n.a,t=n.b;return E(ri(e),ri(t))},p(dt,p(dt,p(lt,bt(vs),ws),p(lt,p(lt,p(lt,cr(function(n){return":"!==n}),ws),Tt(":")),ws)),cr(function(n){return","!==n}))),xs=p(dt,bt(Ze),Jr($s)),ys=u(function(n,e){return e.$?n:e.a}),ks=u(function(e,n){return p(ai,"",Ca(p(_t,function(n){return n.b},p(Gt,function(n){return y(n.a,e)},n))))}),Ts=function(n){var e=p(ys,v,p(Ht,xs,n)),t=p(ai,200,hi(p(ks,"width",e))),r=p(ks,"float",e),a=p(ks,"align",e);return g(gs,t,r,a)},Ls=Xn("caption"),Ms=Xn("img"),Es=Vu("align"),Ss=Vu("alt"),qs=u(function(n,e){var t=g(hu,0,n,e),r=g(hu,1,n,e),a=g(hu,2,n,e),i=Ts(a);return"left"===i.bt?p(Ms,w([us(t),Ss(r),Es("left"),ss(i.ax)]),w([p(Ls,v,w([Xo(r)]))])):"right"===i.bt?p(Ms,w([us(t),Ss(r),Es("right"),ss(i.ax)]),w([p(Ls,v,w([Xo(r)]))])):(i.bg,p(Ms,w([us(t),Ss(r),Es("center"),ss(i.ax)]),w([p(Ls,v,w([Xo(r)]))])))}),Is=u(function(n,e){var t=g(hu,0,n,e),r=g(hu,1,n,e),a=g(hu,2,n,e),i=Ts(a),o="left"===i.bt?p(Ms,w([us(r),Ss("imagref"),Es("left"),ss(i.ax)]),v):"right"===i.bt?p(Ms,w([us(r),Ss("imagref"),Es("right"),ss(i.ax)]),v):(i.bg,p(Ms,w([us(r),Ss("imagref"),Es("center"),ss(i.ax)]),v));return p(Uu,w([Qu(t)]),w([o]))}),As=u(function(n,e){return p(jo,v,v)}),_s=u(function(n,e){return p(jo,v,v)}),Ds=Xn("pre"),Rs=u(function(n,e){var t=p(cu,n,e),r=ou(t);return p(Ds,w([as("verbatim")]),w([Xo(r)]))}),Cs=u(function(n,e){return Co(p(cu,n,e))}),js=u(function(n,e){return p(jo,v,w([Xo("---")]))}),Xs=u(function(n,e){return p(Gu,v,w([p(Ju,v,v)]))}),Ns=u(function(n,e){return p(jo,v,w([Xo("--")]))}),Hs=u(function(n,e){var t=g(hu,1,n,e),r=g(hu,0,n,e);return p(jo,v,w([Xo("\\newcommand{"+r+"}{"+t+"}")]))}),Ps=u(function(n,e){var t=g(hu,0,n,e);return p(jo,v,w([Xo(p(hs,t,n))]))}),Ws=u(function(n,e){return p(jo,v,v)}),Os=Xn("p"),zs=Vu("id"),Bs=r(function(n,e,t,r){var a=1===qi(e)?g(hu,0,n,e):g(hu,0,n,t);return p(Os,w([zs('"bib:'+a+'"')]),w([Xo("["+a+"] "+p(cu,n,r))]))}),Fs=la(w([E("bibitem",r(function(n,e,t,r){return l(Bs,n,e,t,r)}))])),Js=r(function(n,e,t,r){return{bw:e,bC:n,bD:t,bL:r}}),Gs=we,Ys=$e(1/0),Ks=t(function(n,e,t){var r=p(Gs,{aB:!1,aU:!1},n);if(1===r.$)return t;var a=r.a;return g(Ys,a,e,t)}),Us=function(n){return n.toLowerCase()},Vs=u(function(n,e){return g(Ks,"[,;.!?&_]",function(n){return""},g(Uo," ",n,Us(e)))}),Qs=u(function(n,e){return p(yr,":",w([n,p(Vs,":",e)]))}),Zs=u(function(n,e){g(Uo," ",":",Us(e));return p(yr,"",w(['id="_',p(Qs,n,e),'"']))}),nc=Xn("h2"),ec=u(function(n,e){var t=g(hu,0,n,e),r=p(Pa,"s1",n),a=p(Zs,"section",t),i=0<r?ii(r)+" ":"";return p(nc,w([zs(a)]),w([Xo(A(i,t))]))}),tc=u(function(n,e){var t=g(hu,0,n,e),r=p(Zs,"section",t);return p(nc,w([zs(r)]),w([Xo(t)]))}),rc=u(function(n,e){return p(jo,v,v)}),ac=u(function(n,e){return p(Gu,v,w([p(Ju,v,v)]))}),ic=Xn("h4"),oc=u(function(n,e){var t=g(hu,0,n,e),r=p(Pa,"s3",n),a=p(Pa,"s2",n),i=p(Pa,"s1",n),o=p(Zs,"subsubsection",t),u=0<i?ii(i)+"."+ii(a)+"."+ii(r)+" ":"";return p(ic,w([zs(o)]),w([Xo(A(u,t))]))}),uc=u(function(n,e){var t=g(hu,0,n,e),r=p(Zs,"subsubsection",t);return p(ic,w([zs(r)]),w([Xo(t)]))}),sc=u(function(n,e){var t=g(hu,0,n,e);return p(Gu,w([as("subheading")]),w([Xo(t)]))}),cc=Xn("h3"),fc=u(function(n,e){var t=g(hu,0,n,e),r=p(Pa,"s2",n),a=p(Pa,"s1",n),i=p(Zs,"subsection",t),o=0<a?ii(a)+"."+ii(r)+" ":"";return p(cc,w([zs(i)]),w([Xo(A(o,t))]))}),hc=u(function(n,e){var t=g(hu,0,n,e),r=p(Zs,"subsection",t);return p(cc,w([zs(r)]),w([Xo(t)]))}),lc=x,dc=u(function(n,e){return g(lc,n,p(Ai,0,qi(e)-1),e)}),mc=function(n){return g(Re,u(function(n,e){return A(e,w([function(n){var e=n.b,t=p(Qs,function(n){switch(n){case 1:return"section";case 2:return"subsection";case 3:return"subsubsection";default:return"asection"}}(e.bB),e.u),r=(n.a,'href="#_'+t+'"');ii(e.bB);return p(ts,v,w([p(Uu,w([Qu(r)]),w([Xo(e.u)]))]))}(n)]))}),v,p(dc,vs,n.bb))},bc=u(function(n,e){var t=mc(n);return p(Gu,v,w([p(cc,v,w([Xo("Table of Contents")])),p(rs,v,t)]))}),pc=Xn("td"),gc=function(n){switch(n.$){case 0:var e=n.a;return p(pc,v,w([Xo(e)]));case 3:e=n.a;return p(pc,v,w([Po(e)]));default:return p(pc,v,v)}},vc=Xn("tr"),wc=function(n){if(8===n.$){var e=n.a;return p(vc,v,p(_t,gc,e))}return p(vc,v,v)},$c=Xn("tbody"),xc=Xn("table"),yc=u(function(n,e){return p(xc,v,w([function(n){if(8===n.$){var e=n.a;return p($c,v,p(_t,wc,e))}return p($c,v,v)}(e)]))}),kc=u(function(n,e){var t=g(hu,0,n,e);return p(ls,v,w([Xo(t)]))}),Tc=u(function(n,e){return p(jo,v,v)}),Lc=u(function(n,e){return Co(p(cu,n,e))}),Mc=u(function(n,e){var t=g(Uo,"<","&lt;",g(Uo,">","&gt;",p(cu,n,e)));return p(Ds,w([as("verbatim")]),w([Xo(t)]))}),Ec=u(function(n,e){return p(Gu,w([as("verse")]),w([Xo(ri(p(cu,n,e)))]))}),Sc="http://www.knode.io",qc=u(function(n,e){var t=g(hu,1,n,e),r=g(hu,0,n,e);return p(Uu,w([Qu(Sc+"##document/"+r)]),w([Xo(t)]))}),Ic=u(function(n,e){var t=g(hu,1,n,e),r=g(hu,0,n,e);return p(Uu,w([Qu(Sc+"##public/"+r)]),w([Xo(t)]))}),Ac=function(n){return n.toUpperCase()},_c=function(n){return A(Ac(p(Zi,1,n)),p(jr,1,n))},Dc=Xn("code"),Rc=Xn("ol"),Cc=Xn("strong"),jc=Wn,Xc=function(n){var e=p(Nr,n,ff());return e.$?Fc(n):e.a},Nc=r(function(n,e,t,r){var a=p(Nr,n,cf());return a.$?l(uf,n,e,t,r):g(a.a,e,t,r)}),Hc=u(function(n,e){switch(e.$){case 1:var t=e.a;return p(Os,v,w([Xo("")]));case 6:var r=e.a,a=e.b,i=e.c;return l(nf,n,r,a,i);case 5:r=e.a,a=e.b,i=e.c;var o=e.d;return $(tf,n,r,a,i,o);case 2:var u=e.a,s=e.b;return g(Vc,n,u,s);case 3:t=e.a;return p(jo,v,w([Wo,Po(t)]));case 4:t=e.a;return Co(t);case 7:r=e.a,i=e.b;var c=e.c;return l(Yc,n,r,i,c);case 8:var f=e.a;return p(Zc,n,f);case 0:t=e.a;return p(jo,v,w([Xo(t)]));default:e.a;return p(Os,v,w([Xo("((ERROR))")]))}}),Pc=t(function(n,e,t){return p(Hc,e,p(Ho,n,t))}),Wc=u(function(n,e){return p(_t,Hc(n),e)}),Oc=u(function(n,e){return p(jo,v,w([Xo("\\bozo"),No(g(Pc,0,n,e)),No(g(Pc,1,n,e))]))}),zc=u(function(n,e){var t=p(Hc,n,e);return p(Gu,w([as("center")]),w([t]))}),Bc=u(function(n,e){var t=g(Pc,0,n,e);return p(Dc,v,w([Wo,t]))}),Fc=r(function(n,e,t,r){return p(He,n,w(["theorem","proposition","corollary","lemma","definition"]))?l(of,e,n,t,r):l(Jc,e,_c(n),t,r)}),Jc=r(function(n,e,t,r){var a=p(Hc,n,r);return p(Gu,w([as("environment")]),w([p(Cc,v,w([Xo(e)])),p(Gu,v,w([a]))]))}),Gc=u(function(n,e){return p(Rc,v,w([p(Hc,n,e)]))}),Yc=r(function(n,e,t,r){return l(Xc,e,n,t,r)}),Kc=u(function(n,e){return p(Gu,w([p(jc,"margin-left","2em")]),w([p(Hc,n,e)]))}),Uc=u(function(n,e){return p(ls,v,w([Xo(" "),g(Pc,0,n,e)]))}),Vc=t(function(n,e,t){return p(ts,w([as((r=e,"item"+ii(r)))]),w([p(Hc,n,t)]));var r}),Qc=u(function(n,e){return p(rs,v,w([p(Hc,n,e)]))}),Zc=u(function(n,e){return t=p(Qi,ro,e),p(jo,w([p(jc,"margin-bottom","10px")]),p(_t,Hc(n),t));var t}),nf=r(function(n,e,t,r){return g(Nc(e),n,t,r)}),ef=u(function(n,e){return p(Gu,w([as("quotation")]),w([p(Hc,n,e)]))}),tf=a(function(n,e,t,r,a){var i=p(Nr,e,Fs);return i.$?$(sf,e,n,t,r,a):l(i.a,n,t,r,a)}),rf=u(function(n,e){return p(Cc,v,w([Wo,g(Pc,0,n,e)]))}),af=u(function(n,e){return p(Gu,v,w([p(Hc,n,e)]))}),of=r(function(n,e,t,r){var a=p(Pa,"tno",n),i=p(Pa,"s1",n),o=0<i?" "+ii(i)+"."+ii(a):" "+ii(a),u=p(Hc,n,r);p(Pa,"eqno",n);return p(Gu,w([as("environment")]),w([p(Cc,v,w([Xo(A(_c(e),o))])),p(Gu,w([as("italic")]),w([u]))]))}),uf=r(function(n,e,t,r){var a=p(_t,No,p(Wc,e,r));return p(jo,v,A(w([Xo("\\"+n)]),a))}),sf=a(function(n,e,t,r,a){var i=p(_t,No,p(Wc,e,t)),o=No(p(Hc,e,a)),u=p(_t,No,p(Wc,e,r));return p(jo,v,A(w([Xo("\\"+n)]),A(i,A(u,w([o])))))});function cf(){return la(w([E("bigskip",t(function(n,e,t){return p(Yu,n,t)})),E("medskip",t(function(n,e,t){return p(Xs,n,t)})),E("smallskip",t(function(n,e,t){return p(ac,n,t)})),E("bozo",ao(Oc)),E("cite",t(function(n,e,t){return p(Zu,n,t)})),E("code",t(function(n,e,t){return p(Bc,n,t)})),E("ellie",t(function(n,e,t){return p(cs,n,t)})),E("emph",t(function(n,e,t){return p(Uc,n,t)})),E("eqref",t(function(n,e,t){return p(ds,n,t)})),E("href",t(function(n,e,t){return p(ps,n,t)})),E("image",t(function(n,e,t){return p(qs,n,t)})),E("imageref",t(function(n,e,t){return p(Is,n,t)})),E("index",t(function(n,e,t){return p(As,n,t)})),E("italic",t(function(n,e,t){return p(Uc,n,t)})),E("label",t(function(n,e,t){return p(_s,n,t)})),E("maketitle",t(function(n,e,t){return p(Tc,n,t)})),E("mdash",t(function(n,e,t){return p(js,n,t)})),E("ndash",t(function(n,e,t){return p(Ns,n,t)})),E("newcommand",t(function(n,e,t){return p(Hs,n,t)})),E("ref",t(function(n,e,t){return p(Ps,n,t)})),E("medskip",t(function(n,e,t){return p(Xs,n,t)})),E("smallskip",t(function(n,e,t){return p(ac,n,t)})),E("section",t(function(n,e,t){return p(ec,n,t)})),E("section*",t(function(n,e,t){return p(tc,n,t)})),E("subsection",t(function(n,e,t){return p(fc,n,t)})),E("subsection*",t(function(n,e,t){return p(hc,n,t)})),E("subsubsection",t(function(n,e,t){return p(oc,n,t)})),E("subsubsection*",t(function(n,e,t){return p(uc,n,t)})),E("setcounter",t(function(n,e,t){return p(rc,n,t)})),E("subheading",t(function(n,e,t){return p(sc,n,t)})),E("tableofcontents",t(function(n,e,t){return p(bc,n,t)})),E("term",t(function(n,e,t){return p(kc,n,t)})),E("xlink",t(function(n,e,t){return p(qc,n,t)})),E("xlinkPublic",t(function(n,e,t){return p(Ic,n,t)})),E("documentTitle",t(function(n,e,t){return p(is,n,t)})),E("title",t(function(n,e,t){return p(Tc,n,t)})),E("author",t(function(n,e,t){return p(Fu,n,t)})),E("date",t(function(n,e,t){return p(es,n,t)})),E("revision",t(function(n,e,t){return p(Ws,n,t)})),E("email",t(function(n,e,t){return p(fs,n,t)})),E("strong",t(function(n,e,t){return p(rf,n,t)}))]))}function ff(){return la(w([E("align",t(function(n,e,t){return p(Bu,n,t)})),E("center",t(function(n,e,t){return p(zc,n,t)})),E("comment",t(function(n,e,t){return p(ns,n,t)})),E("enumerate",t(function(n,e,t){return p(Gc,n,t)})),E("eqnarray",t(function(n,e,t){return p(ms,n,t)})),E("equation",t(function(n,e,t){return p(bs,n,t)})),E("indent",t(function(n,e,t){return p(Kc,n,t)})),E("itemize",t(function(n,e,t){return p(Qc,n,t)})),E("listing",t(function(n,e,t){return p(Rs,n,t)})),E("macros",t(function(n,e,t){return p(Cs,n,t)})),E("maskforweb",t(function(n,e,t){return p(ns,n,t)})),E("quotation",t(function(n,e,t){return p(ef,n,t)})),E("tabular",t(function(n,e,t){return p(yc,n,t)})),E("thebibliography",t(function(n,e,t){return p(af,n,t)})),E("useforweb",t(function(n,e,t){return p(Lc,n,t)})),E("verbatim",t(function(n,e,t){return p(Mc,n,t)})),E("verse",t(function(n,e,t){return p(Ec,n,t)}))]))}var hf=cf();cf=function(){return hf};var lf=ff();ff=function(){return lf};var df,mf=u(function(n,e){return p(Gu,v,p(_t,Hc(n),Ea(e)))}),bf=u(function(n,e){return $(Gi,n,Zc,mf,Aa,e)}),pf='\n\n\n% NOTE: the \\maketitlestuff is not working\n% right now\n\n\\title{MiniLaTeX Demo}\n\n\\author{James Carlson}\n\n\\email{jxxcarlson at gmail}\n\n\\date{November 13, 2017}\n\n\\revision{February 1, 2018}\n\n\\maketitle\n\n\\tableofcontents\n\n\\section{Introduction}\n\n\nMiniLaTeX is a subset of LaTeX which can be displayed in a web browser \\cite{hakernews}. One applies a parser-renderer toolchain to convert MiniLaTeX into HTML, then uses MathJax to render formulas and equations. This document is written in MeenyLatex; for additional examples, try the buttons on the lower left, or go to \\href{http://www.knode.io}{www.knode.io}.\n\nFeel free to edit and re-render the text on the left and to experiment with the buttons above. To export a rendered LaTeX file, simply click on the "Export" button above. Your file will be downloaded as "file.html".\n\nPlease bear in mind that MiniLaTeX is still an R&D operation \\cite{techreport}. We are working hard to refine its grammar \\cite{grammar} and extend its scope; we welcome bug reports, comments and suggestions.\n\nMeenyLatex is written in Elm, the functional language for building web apps developed by Evan Czaplicki, starting with his 2012 senior thesis. Although Elm is especially well-suited for writing a parser for MeenyLatex and integrating that parser into an interactive editing environment, MeenyLatex does not depend on any particular language. Indeed, we plan a second implementation of the parrser-renderer toolchain in Haskell.\n\n\\section{Examples}\n\nThe Pythagorean Theorem, $a^2 + b^2 = c^2$, is useful for computing distances.\n\nFormula \\eqref{integral}is one that you learned in Calculus class.\n\n\\begin{equation}\n\\label{integral}\n\\int_0^1 x^n dx = \\frac{1}{n+1}\n\\end{equation}\n\n\n\\begin{theorem}\nThere are infinitely many primes, and each satisfies $a^{p-1} \\equiv 1 \\text{ mod } p$, provided that $p$does not divide $a$.\n\\end{theorem}\n\n\nA Table ...\n\n\\begin{indent}\n\\strong{Light Elements}\n\\begin{tabular}{ l l l l }\nHydrogen & H & 1 & 1.008 \\\\\nHelium & He & 2 & 4.003 \\\\\nLithium& Li & 3 & 6.94 \\\\\nBeryllium& Be& 4& 9.012 \\\\\n\\end{tabular}\n\\end{indent}\n\nAn Image ....\n\n\\image{http://psurl.s3.amazonaws.com/images/jc/propagator_t=2-6feb.png}{Free particle propagator}{width: 300, align: center}\n\nA listing.  Note that in the \\italic{source}of the listing, there are no line numbers.\n\n\\strong{MiniLaTeX Abstract Syntax Tree (AST)}\n\n\\begin{listing}\n\ntype LatexExpression\n= LXString String\n| Comment String\n| Item Int LatexExpression\n| InlineMath String\n| DisplayMath String\n| Macro String (List LatexExpression)\n| Environment String LatexExpression\n| LatexList (List LatexExpression)\n\n\\end{listing}\n\n\nThe MiniLaTeX parser reads text and produces an AST. A rendering function converts the AST into HTML. One could easily write functions \\code{render: LatexExpression -> String}to make other conversions.\n\n\\section{Short Writer\'s Guide}\n\nWe plan a complete Writer\'s Guide for MiniLaTeX. For now, however, just a few pointers.\n\n\\begin{itemize}\n\\item Make liberal use of blank lines. Your source text will be much easier to read, and the converter has optimizations that work especially well when this is done.\n\n\\item Equations and environments should have a blank line above one below. Items in lists should be separated by blank lines. This is not strictly necessary, but it helps the converter and it helps you.\n\n\n\\end{itemize}\n\n\n\\italic{Fast Render}is an optimization that speeds up parsing and rendering for long documents. Only paragraphs which are changed are re-parsed (expensive) and re-rendered (inexpensive). However, to resolve section numbers, cross-references, etc., a full render is necessary.\n\nAll of these operations will have a very significant speed-up when version 0.19 of the Elm compiler is released and when MathJax 3.0 is released and integrated into MiniLaTeX.\n\n\\section{More about MiniLaTeX}\n\nArticles and code:\n\n\\begin{itemize}\n\\item \\href{https://hackernoon.com/towards-latex-in-the-browser-2ff4d94a0c08}{Towards LaTeX in the Browser}\n\n\\item \\href{https://github.com/jxxcarlson/minilatexDemo}{Code for the Demo App}\n\n\\item \\href{http://package.elm-lang.org/packages/jxxcarlson/minilatex/latest}{The MeenyLatex Elm Library}\n\n\n\\end{itemize}\n\n\nTo try out MeenyLatex for real, sign up for a free account at \\href{http://www.knode.io}{www.knode.io}. The app is still under development &mdash; we need people to test it and give feedback. Contributions to help improve the open-source MeenyLatex Parser-Renderer are most welcome. Here is the \\href{https://github.com/jxxcarlson/minilatex}{GitHub repository}. The MeenyLatex Demo as well as the app at knode.io are written in \\href{http://elm-lang.org/}{Elm}. We also plan a Haskell version.\n\nPlease send comments, bug reports, etc. to jxxcarlson at gmail.\n\n\\section{Technical Note}There is a \\italic{very rough} \\href{http://www.knode.io/#@public/628}{draft grammar}for MiniLaTeX, written mostly in EBNF. However, there are a few productions, notably for environments, which are not context-free. Recall that in a context-free grammar, all productions are of the form $A \\Rightarrow \\beta$, where $A$is a non-terminal symbol and $\\beta$is a sequence of terminals and nonterminals. There are some productions of the form $A\\beta \\Rightarrow \\gamma$, where $\\beta$is a terminal symbol. These are context-sensitive productions, with $\\beta$providing the context.\n\n\\section{Restrictions, Limitations, and Todos}\n\nBelow are some of the current restrictions and limitations.\n\n\n%% COMMENT: below we nest one environment inside another\n\n\\begin{restrictions}\n\\begin{enumerate}\n\n\\item The enumerate and itemize environments cannot be nested inside one another.  They\ncan, however, contain inline math and macros, and they may be contained in other environments,\ne.g., theorem.\n\n\\item The tabular environment ignores formatting information and left-justifies everything in the cell.\n\n\\end{enumerate}\n\\end{restrictions}\n\nWe are working to fix known issues and to expand the scope of MeenyLatex.\n\n% NOTE. The real bibliography machinery\n% has not been wired up yet.\n\n\n\\strong{Bibliography}\n\n\\begin{enumerate}\n\n\\item [HN] \\href{https://hackernoon.com/towards-latex-in-the-browser-2ff4d94a0c08}{Towards Latex in the Browser}\n\n\\item [GR] \\href{http://www.knode.io/#@public/628}{MeenyLatex Grammar}\n\n\\item [TR] \\href{http://www.knode.io/#@public/525}{MeenyLatex Technical Report}\n\n\n\\end{enumerate}\n\n\n\\bigskip\n\n\\image{https://cdn-images-1.medium.com/max/1200/1*HlpVE5TFBUp17ua1AdiKpw.gif}{The way we used to do it.}{align: center}\n\n\\begin{comment}\n\nThis text\n\nshould not appear\n\n\\end{comment}\n\n\n\\begin{comment}\n\\strong{Bibliography}\n\n\\begin{thebibliography}\n\n\\bibitem[HN]{hackernews} \\href{https://hackernoon.com/towards-latex-in-the-browser-2ff4d94a0c08}{Towards Latex in the Browser}\n\n\\bibitem[GR]{grammar} \\href{http://www.knode.io/#@public/628}{MeenyLatex Grammar}\n\n\\bibitem[TR]{techreport} \\href{http://www.knode.io/#@public/525}{MeenyLatex Technical Report}\n\n\n\\end{thebibliography}\n\n\\end{comment}\n\n\n',gf=function(n){return{$:6,a:n}},vf=mn,wf=ln,$f=u(function(n,e){return{$:0,a:n,b:e}}),xf=function(n){var e=n.a,t=n.b;return p($f,1664525*e+t>>>0,t)},yf=u(function(n,e){return{$:0,a:n,b:e}}),kf=Ze,Tf=(df=kf,dn(function(n){n(ln(df(Date.now())))})),Lf=function(n){return n},Mf=p(vf,function(n){return wf((e=Lf(n),t=xf(p($f,0,1013904223)),r=t.a,a=t.b,xf(p($f,r+e>>>0,a))));var e,t,r,a},Tf),Ef=Sn,Sf=u(function(n,e){return n(e)}),qf=t(function(e,n,t){if(n.b){var r=n.a,a=n.b,i=p(Sf,r,t),o=i.a,u=i.b;return p(vf,function(n){return g(qf,e,a,u)},p(Ef,e,o))}return wf(t)}),If=t(function(n,e,t){return wf(t)}),Af=u(function(a,n){var i=n;return function(n){var e=i(n),t=e.a,r=e.b;return E(a(t),r)}}),_f=u(function(n,e){return p(Af,n,e)});Ln.Random=Mn(Mf,qf,If,_f);var Df=qn("Random"),Rf=u(function(n,e){return Df(p(Af,n,e))}),Cf=function(n){var e=n.a,t=277803737*(e^e>>>4+(e>>>28));return(t>>>22^t)>>>0},jf=u(function(t,u){return function(n){var e=T(t,u)<0?E(t,u):E(u,t),r=e.a,a=e.b-r+1;if(a-1&a){var i=(-a>>>0)%a>>>0,o=function(n){var e=Cf(n),t=xf(n);return T(e,i)<0?o(t):E(e%a+r,t)};return o(n)}return E(((a-1&Cf(n))>>>0)+r,xf(n))}}),Xf=In(v),Nf=function(n){return{$:21,a:n}},Hf=wf(0),Pf=u(function(e,n){return p(vf,function(n){return wf(e(n))},n)}),Wf=t(function(t,n,r){return p(vf,function(e){return p(vf,function(n){return wf(p(t,e,n))},r)},n)}),Of=u(function(n,e){var t=e;return gn(p(vf,Ef(n),t))}),zf=t(function(n,e,t){return p(Pf,function(n){return 0},(r=p(_t,Of(n),e),g(Xe,Wf(Ae),wf(v),r)));var r}),Bf=t(function(n,e,t){return wf(0)}),Ff=u(function(n,e){return p(Pf,n,e)});Ln.Task=Mn(Hf,zf,Bf,Ff);var Jf,Gf,Yf,Kf,Uf,Vf,Qf,Zf,nh=qn("Task"),eh=u(function(n,e){return nh(p(Pf,n,e))}),th=p(eh,Nf,Tf),rh=u(function(n,e){var t=p(bf,e.F,n);return E(I(e,{i:e.i+1,A:t,ai:"NOT IMPLEMENTED",aq:Sa(n),o:n}),th)}),ah=t(function(n,e,t){return $(Gi,n,Zc,mf,e,t)}),ih=A("\n\n  \\title{Wave packets and the dispersion relation}\n\n  \\maketitle\n\n  \\tableofcontents\n\n","\n\nAs we have seen with the sinc packet, wave packets can be localized in space.  A key feature of such packets is their \\italic{group velocity} $v_g$.  This is the velocity which which the \"body\" of the wave packet travels.  Now a wave packet is synthesized by superposing many plane waves, so the natural question is how is the group velocity of the packet related to the phase velocities of its constituent plane waves.  We will answer this first in the simplest possible situation -- a superposition of two sine waves.  Next, we will reconsider the case of the sinc packet.  Finally, we will study a more realistic approximation to actual wave packets which gives insight into the manner and speed with which wave packets change shape as they evolve in time.  We end by applying this to an electron in a thought experiment in which it has been momentarily confned to an atom-size box -- about one Angstrom, or $10^{-10}\\text{ meter}$.\n\n\\section{A two-frequency packet: beats}\n\n\\image{http://psurl.s3.amazonaws.com/images/jc/beats-eca1.png}{Two-frequency beats}{width: 350, float: right}\n\nConsider a wave\n$\\psi = \\psi_1 + \\psi_2$ which is the sum of two terms with slightly different frequencies.  If the waves are sound waves, then then what one will hear is a pitch that corresponding to the average of the two frequencies modulated in such a way that the volume goes up and down at a frequency corresponding to their difference.\n\nLet us analyze this phenomenon mathematically, setting\n\n\n\\begin{equation}\n\\psi_1(x,t)  = \\cos((k - \\Delta k/2)x - (\\omega - \\Delta \\omega/2)t)\n\\end{equation}\n\nand\n\n\\begin{equation}\n\\psi_2(x,t)  = \\cos((k + \\Delta k/2)x - (\\omega + \\Delta \\omega/2)t)\n\\end{equation}\n\nBy the addition law for the sine, this can be rewritten as\n\n\\begin{equation}\n\\psi(x,t) = 2\\sin(kx - \\omega t)\\sin((\\Delta k)x - (\\Delta \\omega)t)\n\\end{equation}\n\nThe resultant wave -- the sum -- consists of of a high-frequency sine wave oscillating according to the average of the component wave numbers and angular frequencies, modulated by a cosine factor that oscillates according to the difference of the wave numbers and the angular frequencies, respectively.  The velocity associated to the high frequency factor is\n\n\\begin{equation}\nv_{phase} = \\frac{\\omega}{k},\n\\end{equation}\n\nwhereas the velocity associated with the low-frequency factor is\n\n\\begin{equation}\nv_{group} = \\frac{\\Delta \\omega}{\\Delta k}\n\\end{equation}\n\nThis is the simplest situation in which one observes the phenomenon of the group velocity.  Take a look at this \\href{http://galileo.phys.virginia.edu/classes/109N/more_stuff/Applets/wavepacket/wavepacket.html}{animation}.\n\n\n\\section{Step function approximation}\n\nWe will now find an an approximation to\n\n\\begin{equation}\n\\psi(x,t) = \\int_{-\\infty}^\\infty a(k) e^{i(kx - \\omega(k)t)} dk\n\\end{equation}\n\nunder the assumption that $a(k)$ is nearly constant over an interval from $k_0 -\\Delta k/2$ to $k_0 + \\Delta k/2$ and that outside of that interval it approaches zero at a rapid rate.  In that case the Fourier integral is approximated by\n\n\\begin{equation}\n \\int_{k_0 - \\Delta k/2}^{k_0 + \\Delta k/2}  a(k_0)e^{i((k_0 + (k - k_0)x - (\\omega_0t + \\omega_0'(k - k_0)t))}dk,\n\\end{equation}\n\nwhere $\\omega_0 = \\omega(k_0)$ and $\\omega_0' = \\omega'(k_0)$.\nThis integral can be written as a product $F(x,t)S(x,t)$, where the first factor is \"fast\" and the second is \"slow.\"  The fast factor is just\n\n\\begin{equation}\nF(x,t) = a(k_0)e^{ i(k_0x - \\omega(k_0)t) }\n\\end{equation}\n\nIt travels with velocity $v_{phase} = \\omega(k_0)/k_0$.  Setting $k; = k- k_0$, the slow factor is\n\n\\begin{equation}\nS(x,t) = \\int_{-\\Delta k/2}^{\\Delta k/2} e^{ik'\\left(x - \\omega'(k_0)t\\right)} dk',\n\\end{equation}\n\nThe slow factor be evaluated explicitly:\n\n\\begin{equation}\nI = \\int_{-\\Delta k/2}^{\\Delta k/2} e^{ik'u} dk' = \\frac{1}{iu} e^{ik'u}\\Big\\vert_{k' = - \\Delta k/2}^{k' = +\\Delta k/2}.\n\\end{equation}\n\nWe find that\n\n\\begin{equation}\nI = \\Delta k\\; \\text{sinc}\\frac{\\Delta k}{2}u\n\\end{equation}\n\nwhere $\\text{sinc } x = (\\sin x )/x$.  Thus the slow factor is\n\n\\begin{equation}\nS(x,t) = \\Delta k\\, \\text{sinc}(  (\\Delta k/2)(x - \\omega'(k_0)t)  )\n\\end{equation}\n\n\nPutting this all together, we have\n\n\\begin{equation}\n\\psi(x,t) \\sim a(k_0)\\Delta k_0\\, e^{i(k_0x - \\omega(k_0)t)}\\text{sinc}(  (\\Delta k/2)(x - \\omega'(k_0)t)  )\n\\end{equation}\n\nThus the body of the sinc packet moves steadily to the right at velocity $v_{group} = \\omega'(k_0)$\n\n\n\\section{Gaussian approximation}\n\nThe approximation used in the preceding section is good enough to capture and explain the group velocity of a wave packet.  However, it is not enough to explain how wave packets change shape as they evolve with time.  To understand this phenomenon, we begin with  an arbitrary packet\n\n\\begin{equation}\n\\psi(x,t) = \\int_{\\infty}^\\infty a(k) e^{i\\phi(k)}\\,dk,\n\\end{equation}\n\nwhere $\\phi(k) = kx - \\omega(k)t$.  We shall assume that the spectrum $a(k)$ is has a maximum at $k = k_0$ and decays fairly rapidly away from the maximum.  Thus we assume that the Gaussian function\n\n\\begin{equation}\na(k) = e^{ -(k-k_0)^2/ 4(\\Delta k)^2}\n\\end{equation}\n\nis a good approximation.  To analyze the Fourier integral\n\n\\begin{equation}\n\\psi(x,t) = \\int_{-\\infty}^{\\infty} e^{ -(k-k_0)^2/ 4(\\Delta k)^2} e^{i(kx - \\omega(k) t)},\n\\end{equation}\n\nwe expand $\\omega(k)$ in a Taylor series up to order two, so that\n\n\\begin{equation}\n\\phi(k) = k_0x + (k - k_0)x - \\omega_0t - \\frac{d\\omega}{dk}(k_0) t- \\frac{1}{2}\\frac{ d^2\\omega }{ dk^2 }(k_0)( k - k_0)^2 t\n\\end{equation}\n\nWriting $\\phi(k) = k_0x - \\omega_0t + \\phi_2(k,x,t)$, we find that\n\n\\begin{equation}\n\\psi(x,t) = e^{i(k_0x - \\omega_0 t)} \\int_{-\\infty}^{\\infty} e^{ -(k-k_0)^2/ 4(\\Delta k)^2} e^{i\\phi_2(k,x,t)}.\n\\end{equation}\n\nMake the change of variables $k - k_0 = 2\\Delta k u$, and write $\\phi_2(k,x,t) = Q(u,x,t)$, where $Q$ is a quadratic polynomial in $u$ of the form $au + b$. One finds that\n\n\\begin{equation}\n  a = -(1 + 2i\\alpha t  (\\Delta k)^2),\n\\end{equation}\n\nwhere\n\n\\begin{equation}\n\\alpha = \\frac{ d^2\\omega }{ dk^2 }(k_0)\n\\end{equation}\n\nOne also finds that\n\n\\begin{equation}\n  b = 2i\\Delta k(x - v_g t),\n\\end{equation}\n\nwhere $v_g = d\\omega/dk$ is the group velocity.  The integral is a standard one, of the form\n\n\\begin{equation}\n\\int_{-\\infty}^\\infty e^{- au^2 + bu} = \\sqrt{\\frac{\\pi}{a}}\\; e^{ b^2/4a }.\n\\end{equation}\n\nUsing this integral  formula and the reciprocity $\\Delta x\\Delta k = 1/2$, which we may take as a definition of $\\Delta x$, we find, after some algebra, that\n\n\\begin{equation}\n\\psi(x,t) \\sim A e^{-B} \\,e^{i(k_0 - \\omega_0t)}\n,\n\\end{equation}\n\nwhere\n\n\\begin{equation}\nA = 2\\Delta k \\sqrt{\\frac{\\pi}{1 + 2i\\alpha \\Delta k^2 t}}\n\\end{equation}\n\nand\n\n\\begin{equation}\nB = \\frac{( x-v_gt )^2 (1 - 2i\\alpha \\Delta k^2 t)}{4\\sigma^2}\n\\end{equation}\n\nwith\n\n\\begin{equation}\n\\sigma^2 = \\Delta x^2 + \\frac{\\alpha^2 t^2}{4 \\Delta x^2}\n\\end{equation}\n\nLook at the expression $B$. The first factor in the numerator controls the motion of motion of the packet and is what guides it to move with group velocity $v_g$.  The second factor is generally a small real term and a much larger imaginary one, and so only affects the phase.  The denominator controls the width of the packet, and as we can see, it increases with $t$ so long as $\\alpha$, the second derivative of $\\omega(k)$ at the center of the packet, is nonzero.\n\n\\section{The electron}\n\nLet us apply what we have learned to an electron which has been confined to a box about the size of an atom, about $10^{-10}$ meters. That is, $\\Delta x \\sim 10^{-10}\\text{ m}$.  The extent of its wave packet will double when\n\n\\begin{equation}\n\\frac{\\alpha^2 t^2}{4 \\Delta x^2} \\sim \\Delta x^2,\n\\end{equation}\n\nthat is, after a time\n\n\\begin{equation}\nt_{double} \\sim \\frac{\\Delta x^2}{\\alpha}\n\\end{equation}\n\nThe dispersion relation for a free particle is\n\n\\begin{equation}\n  \\omega(k) = \\hbar \\frac{k^2}{2m},\n\\end{equation}\n\nso that $\\alpha = \\hbar/m$.  Then\n\n\\begin{equation}\nt_{double} \\sim \\frac{m}{h}\\, \\Delta x^2 .\n\\end{equation}\n\nIn the case of our electron, we find that $t_{double} \\sim 10^{-16}\\,\\text{sec}$.\n\n\\section{ Code}\n\n\n\n\\begin{verbatim}\n# jupyter/python\n\nmatplotlib inline\n\n# code for sinc(x)\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# sinc function\nx = np.arange(-30, 30, 0.1);\ny = np.sin(x)/x\nplt.plot(x, y)\n\n# beats\nx = np.arange(-50, 250, 0.1);\ny = np.cos(0.5*x) + np.sin(0.55*x)\nplt.plot(x, y)\n\\end{verbatim}\n\n\n\n\\section{References}\n\n\\href{https://www.eng.fsu.edu/~dommelen/quantum/style_a/packets.html}{Quantum Mechanics for Engineers: Wave Packets}\n\n\\href{http://users.physics.harvard.edu/~schwartz/15cFiles/Lecture11-WavePackets.pdf}{Wave Packets, Harvard Physics}\n\n\\href{http://ocw.mit.edu/courses/nuclear-engineering/22-02-introduction-to-applied-nuclear-physics-spring-2012/lecture-notes/MIT22_02S12_lec_ch6.pdf}{Time evolution in QM - MIT}\n\n"),oh=function(n){return{$:22,a:n}},uh=In,sh=uh(v),ch=G,fh=j,hh=u(function(n,e){return p(fh,1e3,Lf(e))}),lh=p(yf,0,v),dh=u(function(n,e){switch(n.$){case 0:var t=Sa(e.o),r=g(ah,e.F,e.A,e.o),a=p(_t,Oe,t);return E(I(e,{i:e.i+1,A:r,aL:a,aq:t}),uh(w([p(Rf,gf,p(jf,1,1e4))])));case 2:return p(rh,e.o,e);case 3:return E(I(e,{i:e.i+1,A:p(bf,e.F,""),o:""}),sh);case 4:return E(I(e,{i:e.i+1,A:p(bf,e.F,pf),o:pf}),sh);case 1:return E(I(e,{o:n.a}),sh);case 5:return E(e,p(Rf,gf,p(jf,1,1e4)));case 6:return E(I(e,{F:n.a}),sh);case 7:return E(I(e,{q:0}),sh);case 8:return E(I(e,{q:1}),sh);case 10:return E(I(e,{q:3}),sh);case 9:return E(I(e,{q:2}),sh);case 11:return E(I(e,{aj:0}),sh);case 12:return E(I(e,{aj:1}),sh);case 13:return p(rh,'\n\\title{MiniLaTeX: Technical Report}\n\n\\author{James Carlson}\n\n\\email{jxxcarlson at gmail}\n\n\\date{October 29, 2017}\n\n\\revision{January 16, 2017}\n\n\n\n\\maketitle\n\n\n\\begin{abstract}\nThe aims of the MiniLaTeX project are (1) to establish a subset\nof LaTeX which can be rendered either as HTML (for the browser) or as PDF (for print and display), (2) to implement a reference parser and renderer for MiniLaTeX, (3) to provide an online editor/reader for MiniLaTeX documents using the parser/renderer.  As proof of concept, this document is written in MiniLaTeX  and is distributed via \\href{http://www.knode.io}{www.knode.io}, an implementation of (3).\nTo experiment with MiniLaTeX, take a look at the \\href{https://jxxcarlson.github.io/app/minilatex/src/index.html}{Demo App}.\n\\end{abstract}\n\n\n\\strong{Credits.} \\italic{I wish to acknowledge the generous help that I have received throughout this project from the community at } \\href{http://elmlang.slack.com}{elmlang.slack.com}, \\italic{with special thanks to Ilias van Peer.}\n\n\\tableofcontents\n\n\\section{Introduction}\n\n\nThe introduction of TeX by Donald Knuth, LaTeX by Leslie Lamport, and Postscript/PDF by John Warnock, supported by a vigorous open source community, have given mathematicians, physicists, computer scientists, and engineers the tools they need to produce well-structured documents  with mathematical notation typeset to the very highest esthetic standards.  For dissemination by print and PDF, the problem of mathematical communication is solved.\n\nThe Web, however, offers different challenges.  The MathJax project (\\href{http://www.mathjax.org}{www.mathjax.org}) addresses many of these challenges, and its use is now ubiquitous on platforms such as mathoverflow and on numerous blogs.  There is, however, a gap.  MathJax beautifully renders the purely mathematical part of the text, like the inline text $\\alpha^2 + \\beta^2 = \\gamma^2$, written as\n\n\\begin{verbatim}\n$ \\alpha^2 + \\beta^2 = \\gamma^2 $\n\\end{verbatim}\n\nor like the displayed text\n\n$$\n   \\int_0^1 x^n dx = \\frac{1}{n+1},\n$$\n\nwhich is written as\n\n\\begin{verbatim}\n$$\n   \\int_0^1 x^n dx = \\frac{1}{n+1}\n$$\n\\end{verbatim}\n\nThere remains the rest: macros like \\code{emph}, \\code{section}, \\code{label}, \\code{eqref}, \\code{href}, etc., and a multitude of LaTeX environments from \\italic{theorem} and \\italic{definition} to  \\italic{equation}, \\italic{align}, \\italic{tabular}, \\italic{verbatim}, etc.\n\n It is the aim of this project is to develop a subset of LaTeX, which we call \\italic{MiniLaTeX}, that can be displayed in the browser by a suitable parser-renderer and which can also be run through standard LaTeX tools such as \\code{pdflatex}.\n\nAn experimental web app for using MiniLaTeX in the browser can be found at \\href{http://www.knode.io}{www.knode.io}.  For proof-of-concept examples,  see  the document \\xlinkPublic{445}{MiniLaTeX} on that site.\n\n\\strong{Note.} This document is written in a simplified version of MiniLaTeX (version 0.5).  Below, we describes the current state of the version under development for the planned 1.0 release.  Much of the discussion applies to version 0.5 as well.\n\n\\section{Technology}\n\nThe MiniLaTeX parser/renderer is written in Elm, the functional language with Haskell-like syntax created by Evan Czaplicki.  Elm is best known as language for building robust front-end apps for the web.  The fact that it also has powerful parser tools makes it an excellent choice for a project like MeenyLatex, for which an editor/reader app is needed to make real-world use of the parser/renderer.  The app at \\href{http://www.knode.io}{www.knode.io} talks to a back-end app written using the Phoenix web framework for Elixir  (see \\href{https://elixir-lang.org/}{elixir-lang.org}).  Elixir is the functional programming language based on Erlang created by José Valim.\n\n\\section{Components and Strategy}\n\nThe overall flow of data in MeenyLatex is\n\n$$\n\\text{MiniLaTeX source text} \\longrightarrow\n\\text{AST} \\longrightarrow\n\\text{HTML}\n$$\n\nwhere the \\code{AST} is an abstract syntax tree consisting of a \\code{LatexExpresssion}, to be defined below.  The parser consumes MiniLaTeX source text and produces an AST.\nThe renderer converts the AST into HTML.  Rendering takes two forms. In the first form, it transforms a single \\code{LatexExpression} into HTML.  In the second, the source text is broken into a list of paragraphs and an initial \\code{latexState} is defined.  As each paragraph is consumed by the processor, it is parsed, the  \\code{latexState} is updated, and the AST for the paragraph is rendered into HTML, with the result depending on the updated \\code{latexState}.  The result is a list of HTML strings that is concatenated to give the final HTML.  We will also discuss a \\code{differ}, which speeds up the the edit-save-render cycle as experienced by an author.  The idea is to keep track of changes to paragraphs and only re-render what has changed since the last edit.\n\n\n\n\n\\section{AST and Parser}\n\nThe core technology of MiniLaTeX is the parser.  It consumes MiniLaTeX source text and produces as output an abstract syntax tree (AST).  The AST  is a list of \\code{LatexExpressions}.  \\code{LatexExpressions} are defined recursively by the following Elm code:\n\n\\begin{verbatim}\ntype LatexExpression\n    = LXString String\n    | Comment String\n    | Item Int LatexExpression\n    | InlineMath String\n    | DisplayMath String\n    | Macro String (List LatexExpression)\n    | Environment String LatexExpression\n    | LatexList (List LatexExpression)\n\\end{verbatim}\n\nSource text of the form $ \\$ TEXT \\$ $ parses as $\\tt{InlineMath}\\ TEXT$,  and text of the form $ \\$\\$TEXT \\$\\$ $  parses as $\\tt{DisplayMath}\\ TEXT$\n\nSource of the form $\\backslash item\\ TEXT$ maps to $\\tt{Item\\ 1\\ TEXT}$, while\n $\\backslash itemitem\\ TEXT$ maps to $\\tt{Item\\ 2\\ TEXT}$, etc.\n\nA macro like $\\backslash foo\\{1\\}\\{bar\\}$ maps to $\\tt{Macro "foo" ["1", "bar"]}$ -- the string after Macro is the macro name, and this is followed by the argument list, which may be empty.\n\nFinally, an environment like\n\\begin{verbatim}\n\\begin{theorem}\nBODY\n\\end{theorem}\n\\end{verbatim}\n\nmaps to $\\tt{Environment\\ "theorem"\\ PARSE(BODY)}$,\nwhere $\\tt{PARSE(BODY)}$ is the $\\tt{LatexExpression}$ obtaining by parsing $\\tt{BODY}$.\n\nAs an example, consider the text below.\n\n\\begin{verbatim}\nThis is MiniLaTeX:\n\\begin{theorem}\n  This is a test: $\\alpha^2 = 7$ \\foo{1}\n \\begin{a}\n  la di dah\n\\end{a}\n\\end{theorem}\n\\end{verbatim}\n\nRunning \\code{MeenyLatex.Parser.latexList} on this text results in the following AST:\n\n\\begin{verbatim}\nOk (LatexList (\n  LXString "This is MiniLaTeX:",\n  [Environment "theorem" (\n    LatexList ([\n         LXString "This is a test:",\n         InlineMath "\\\\alpha^2 = 7",\n         Macro "foo" ["1"],\n         Environment "a" (\n              LatexList ([LXString "la di dah"])\n     )]))]))\n\\end{verbatim}\n\nAt the top level it is a list of \\code{LatexExpressions} -- a string and an \\code{Environment}.\nThe body of the environment is a list of \\code{LatexExpressions} -- a string, an \\code{InlineMath} element, a \\code{Macro} with one argument, and another \\code{Environment},  This is a structure which \\code{MeenyLatex.Render.render} can transform into HTML.\n\n\\subsection{Parser Combinators}\n\nThe MiniLaTeX parser, comprising 222 lines of code as of this writing, is built using parser combinators from Evan Czaplicki\'s \\href{https://github.com/elm-tools/parser}{elm-tools/parser} package.  The combinators are akin to those in the Haskell parsec package.  As as example, the main MeenyLatex parsing function is\n\n\\begin{verbatim}\nparse : Parser LatexExpression\nparse =\n    oneOf\n        [ texComment\n        , lazy (\\_ ⟶ environment)\n        , displayMathDollar\n        , displayMathBrackets\n        , inlineMath\n        , macro\n        , words\n        ]\n\\end{verbatim}\n\nThis function tries each of its component parsers in order until it finds one that\nmatches the input text.  The \\code{environment} parser is the most interesting. It captures the environment name and then passes it on to \\code{environmentOfType}.\n\n\n\\begin{verbatim}\nenvironment : Parser LatexExpression\nenvironment =\n    lazy (\\_ ⟶ beginWord |˃ andThen environmentOfType)\n\\end{verbatim}\n\nThe \\code{environmentOfType}\nfunction acts as a switching yard, routing the action of the parser to the correct function. The \\italic{enumurate} and \\italic{itemize} environments need special handling, while others are handled by \\code{standardEnvironmentBody}.\n\n\\begin{verbatim}\nenvironmentOfType : String ⟶ Parser LatexExpression\nenvironmentOfType envType =\n    let\n        endWord =\n            "\\\\end{" ++ envType ++ "}"\n    in\n    case envType of\n        "enumerate" ⟶\n            itemEnvironmentBody endWord envType\n        "itemize" ⟶\n            itemEnvironmentBody endWord envType\n        _ ⟶\n            standardEnvironmentBody endWord envType\n\\end{verbatim}\n\nA standard environment such as \\italic{theorem} or \\italic{align} is handled like this:\n\n\\begin{verbatim}\nstandardEnvironmentBody endWord envType =\n    succeed identity\n        |. ws\n        |= repeat zeroOrMore parse\n        |. ws\n        |. symbol endWord\n        |. ws\n        |˃ map LatexList\n        |˃ map (Environment envType)\n\\end{verbatim}\n\nNote the repeated calls to \\code{parse} in the body of \\code{standardEnvironmentBody}.  Thus an environment can contain a nested sequence of environments, or even a tree thereof..\nThe symbol $|.$ means "use the following parser to recognize text but do not retain it."  Thus $|. \\text{ws}$ means "recognize white space but ignore it."  The symbol  $|$= means "use the following parse and retain what it yields."\n\n\\section{Rendering an AST to HTML}\n\nThis section addresses the second step in the pipelne\n\n$$\n\\text{MiniLaTeX source text} \\longrightarrow\n\\text{AST} \\longrightarrow\n\\text{HTML}\n$$\n\nCode for the second step is housed in the module \\code{MeenyLatex.Render}. The primary function is\n\n\\begin{verbatim}\nrender : LatexState ⟶ LatexExpression ⟶ String\nrender latexState latexExpression =\n    case latexExpression of\n        Comment str ⟶\n            renderComment str\n        Macro name args ⟶\n            renderMacro latexState name args\n        Item level latexExpression ⟶\n            renderItem latexState level latexExpression\n        ETC...\n\\end{verbatim}\n\nThis function dispatches a given \\code{LatexExpression} to its handler, which then computes a string representing the HTML output.  That output depends on the current \\code{latexState} -- a data structure  which holds information about various counters such as section numbers as well as information about cross-references.  One can call \\code{render} on a default \\code{LateExpression} to convert it to HTML.  However, the usual process for rendering a MiniLaTeX document from scratch is to first transform it into logical paragraphs, i.e., a list of strings, then use the \\code{accumulator} function defined below to transform paragraphs one at a time into HTML, updating the \\code{latexState} with each paragraph.\n\nThe accumulator is a function of four variables, as indicated below.  The first argument, \\code{parse}, takes a string as input and parses it to produce a \\code{LatexExpression} as output.  The second, \\code{render}, takes a \\code{LatexExpression} and a \\code{LatexState} as input and produces HTML as output.  The third, \\code{updateState}, takes a \\code{LatexExpression} and a \\code{LatexState} as input and produces a new \\code{LatexState} as output.  The fourth and final argument, \\coce{input}, is the list of strings (logical paragraphs) to be rendered.  The output of the \\code{accumulator} is a tuple consisting of a list of strings, the rendered HTML, and the final \\code{latexState}.\n\n$$\n{\\bf accumulator\\ } \\text{parse render updateState inputList} \\longrightarrow (\\text{outputList}, latexState)\n$$\n\nThe \\code{accumulator} uses \\code{List.foldl} to build up the final list of rendered paragraphs one paragraph at a time, starting with an empty list.  The driver for this operation is the \\code{transformer} function, which we treat below.\n\n\n\\begin{verbatim}\naccumulator :\n    (String ⟶ List LatexExpression)\n    ⟶ (List LatexExpression ⟶ LatexState ⟶ String)\n    ⟶ (List LatexExpression ⟶ LatexState ⟶ LatexState)\n    ⟶ List String\n    ⟶ ( List String, LatexState )\naccumulator parse render updateState inputList =\n    inputList\n        |˃ List.foldl (transformer parse render updateState) \n           ( [], Render.emptyLatexState )\n\\end{verbatim}\n\nThe role of the \\code{transformer} function is to carry forward the current \\code{latexState}, updating it, and transforming \\code{LatexExpressions} into HTML. A kind of transducer, the \\code{transformer} is a function of five variables:\n\n$$\n{\\bf transformer\\ } \\text{parse render updateState input acc} \\longrightarrow\n(\\text{List renderedInput}, \\text{state})\n$$\n\nHere is the code:\n\n\\begin{verbatim}\ntransformer :\n    (input ⟶ parsedInput)\n    ⟶ (parsedInput ⟶ state ⟶ renderedInput)\n    ⟶ (parsedInput ⟶ state ⟶ state)\n    ⟶ input\n    ⟶ ( List renderedInput, state )\n    ⟶ ( List renderedInput, state )\ntransformer parse render updateState input acc =\n    let\n        ( outputList, state ) = acc\n        parsedInput = parse input\n        newState = updateState parsedInput state\n    in\n        ( outputList ++ [ render parsedInput newState ], newState )\n\\end{verbatim}\n\nTo bundle all this code in convenient form, we also define a function\n\n$$\n{\\bf transformParagraphs\\ } \\text{List SourceText} \\longrightarrow  \\text{List HTMLText}\n$$\n\nthat maps a  list of paragraphs of MeenyLatex source text to its rendition as list of HTML strings.  The \\code{transformParagraphs} function is defined in terms of the \\code{accumulator}:\n\n\\begin{verbatim}\ntransformParagraphs : List String ⟶ List String\ntransformParagraphs paragraphs =\n    paragraphs\n        |˃ accumulator Render.parseParagraph renderParagraph updateState\n        |˃ Tuple.first\n\\end{verbatim}\n\n\n\\section{Differ: Speeding up the Edit Cycle}\n\nIn the previous section, we described in outline how a MiniLaTeX document is rendered into HTML.  In order to have a fast edit-render cycle, one which feels instantaneous or nearly so to an author, we need an additional construct.  The idea is this.  The app maintains a list $X$ of logical paragraphs for the document being edited, as well as a list $r(X)$ of rendered paragraphs. Suppose that the author makes some edits and pressed the update button.  The app computes a new list of logical paragraphs and compares it with the old.  The old list will have the form $X = \\alpha\\beta\\gamma$ and the new one will have the form $Y = \\alpha\\beta\'\\gamma$, where $\\alpha$ is the greatest common prefix and $\\gamma$ is the greatest common suffix.  By greatest common prefix, we mean the largest list $\\alpha$ of contiguous elements of the list $X$ that is also list of contiguous elements of the list $Y$, and such that the first element of $\\alpha$ is the same as the first element of $X$ and also of $Y$.  The largest common suffix is defined similarly.  Note that $r(X) = r(\\alpha)r(\\beta)r(\\gamma)$ and $r(Y) =  r(\\alpha)r(\\beta\')r(\\gamma)$.  Thus to compute $r(Y)$, we need only compute $r(\\beta\')$, relying on the previously computed $r(\\alpha)$ and $r(\\gamma)$.\n\nWhile the strategy just described is not the theoretically  most efficient, it aways works and in fact is quite fast in practice because of the typical behavior of authors -- make a few changes, or add a little text, then press the save/update button.  The point is that changes to the text are generally localized.  If  the author  adds, deletes, or changes a single paragraph, at most one paragraph has to be re-rendered.\n\nWe now discuss the core code for the strategy for diffing and rendering the list of logical paragraphs.  First comes the data structure to be maintained while editing:\n\n\\begin{verbatim}\ntype alias EditRecord =\n    { paragraphs : List String\n    , renderedParagraphs : List String\n    }\n\\end{verbatim}\n\nTo set up this structure when an author begins editing, we make use of the general \\code{initialize} function in module \\code{MeenyLatex.Differ}:\n\n\\begin{verbatim}\ninitialize : (List String ⟶ List String) ⟶ String ⟶ EditRecord\ninitialize transformParagraphs text =\n    let\n        paragraphs =\n            paragraphify text\n        renderedParagraphs =\n            transformParagraphs paragraphs\n    in\n        EditRecord paragraphs renderedParagraphs\n\\end{verbatim}\n\n\nTo make use of \\code{Differ.initialize}, we call it with \\code{Accumulator.transformParagraphs}:\n\n\\begin{verbatim}\neditRecord = Differ.initialize Accumulator.transformParagraphs\n\\end{verbatim}\n\n\\subsection{Inside the Differ}\n\nLet\'s take a quick look at the operation of the differ.  The basic data structure\nis the \\code{DiffRecord}\n\n\\begin{verbatim}\ntype alias DiffRecord =\n    { commonInitialSegment : List String\n    , commonTerminalSegment : List String\n    , middleSegmentInSource : List String\n    , middleSegmentInTarget : List String\n    }\n\\end{verbatim}\n\nThus $\\alpha = \\text{commonInitialSegment}$,  $\\beta = \\text{middleSegmentInSource}$,\n$\\gamma = \\text{commonTerminalSegment}$, and $\\beta\' = \\text{middleSegmentInTarget}$.\nThese are computed using the function \\code{diff}:\n\n\\begin{verbatim}\ndiff : List String ⟶ List String ⟶ DiffRecord\ndiff u v =\n    let\n        a = commonInitialSegment u v\n        b = commonTerminalSegment u v\n        la = List.length a\n        lb = List.length b\n        x =  u |˃ List.drop la |˃ dropLast lb\n        y = v |˃ List.drop la |˃ dropLast lb\n    in\n        DiffRecord a b x y\n\\end{verbatim}\n\nIn an edit cycle, we need to update the current \\code{EditRecord}, which we do using \\code{Differ.update}.\n\n$$\n{\\bf Diff.update\\ } \\text{transformer editRecord text} \\longrightarrow \\text{newEditRecord}\n$$\n\nThe \\code{Diff.update} function defined below breaks the \\code{text} into paragraphs, computes the \\code{diffRecord}, and returns an updated version of \\code{editRecord} by applying \\code{transformer} to $\\beta\'$.\n\n\\begin{verbatim}\nupdate : (String ⟶ String) ⟶ EditRecord ⟶ String ⟶ EditRecord\nupdate transformer editorRecord text =\n    let\n        newParagraphs =\n            paragraphify text\n        diffRecord =\n            diff editorRecord.paragraphs newParagraphs\n        newRenderedParagraphs =\n            renderDiff transformer diffRecord editorRecord.renderedParagraphs\n    in\n        EditRecord newParagraphs newRenderedParagraphs\n\\end{verbatim}\n\nHere is how \\code{renderDiff}, which is used to update the \\code{editRecord}, is defined:\n\n\\begin{verbatim}\nrenderDiff : (String ⟶ String) ⟶ DiffRecord ⟶ List String ⟶ List String\nrenderDiff renderer diffRecord renderedStringList =\n  let\n    ii = List.length diffRecord.commonInitialSegment\n    it = List.length diffRecord.commonTerminalSegment\n    initialSegmentRendered = List.take ii renderedStringList\n    terminalSegmentRendered = takeLast it renderedStringList\n    middleSegmentRendered = (renderList renderer) diffRecord.middleSegmentInTarget\n  in\n    initialSegmentRendered ++ middleSegmentRendered ++ terminalSegmentRendered\n\\end{verbatim}\n\n\n\\section{Status}\n\nMiniLaTeX is now at version 2.1.  It includes the following.\n\n\\begin{itemize}\n\n\\item \\strong{Environments:}  \\italic{align, center, enumerate, eqnarray, equation, itemize, macros, tabular}. The environments  \\italic{theorem, proposition, corollary, lemma, definition} are handled by a default mechanism.\n\n\\item \\strong{Macros}: \\italic{cite, code, ellie, emph, eqref, href, iframe, image, index, italic, label, maketitle, mdash, ndash, newcommand, ref, section, section*, strong, subheading, subsection, subsection*, subsubsection, subsubsection*, title, term, xlink, xlinkPublic}\n\\end{itemize}\n\nMost of the macro and environment renderers are in final or close to final form. A few, e.g. \\italic{tabular} need considerably more work, and a few more are dummies.\n\n\n\n\\comment{ Article by Ilias: https://github.com/zwilias/elm-json/blob/master/src/Json/Parser.elm}\n\n\n',e);case 14:return p(rh,ih,e);case 15:return p(rh,'\n\\section{Weather App}\n\n\\image{http://noteimages.s3.amazonaws.com/jim_images/weatherAppColumbus.png}{}{float: right, width: 250}\n\nIn this section we will learn how to write an app that displays information about the weather  in any city on planet earth.   The data comes from a web server at \\href{http://openweathermap.org/}{openweathermap.org}; to access it, you will need a free API key, which is a long string of letters and numbers  that looks like \\code{a23b...ef5d4} and which functions as a kind password. To get an API key, follow this \\href{http://openweathermap.org/price}{link}.  Once you have an API key, you can try out a working copy of the app at \\href{https://jxxcarlson.github.io/app/weather.html}{jxxcarlson.github.io}.\n\n\\subheading{Framing Main}\n\nWe will build the app in a series of steps.  The first step is to build a skeleton that has all the needed structural parts, e.g, the view and update functions.    Part of this "framing" step is to define the data types that the app will use --- \\code{Model} and its various parts, and \\code{Msg}, a union type which determines which messages can be sent to the Elm Runtime.  Let\'s begin with \\code{main}, which looks like this:\n\n\\begin{verbatim}\nmain =\n    Html.program\n        { init = init\n        , view = view\n        , update = update\n        , subscriptions = subscriptions\n        }\n\\end{verbatim}\n\nThis is the structure, \\code{Html.program}, is used by $99\\%$ of all Elm programs.  It is a a record with four fields, the init, view, and update functions, and subscriptions, which will eventually be used to add date and time to the app. The init, view and update functions all work  with the model, so let\'s discuss that next.\n\n\\subheading{Model}\n\nEvery model has a type, and that type dictates what the model is able to represent.  In our case the \\code{Model} type, displayed below,  is a record with five fields: one for weather data, one for messages for the user, one for the location whose weather we retrieve, one for the API key discussed above, and one for the internet address of the server.  The first field has a special type which we discuss in a moment, while the other fields are strings.\n\n\n\\begin{verbatim}\ntype alias Model =\n    { weather : Maybe Weather\n    , message : String\n    , location : String\n    , apiKey : String\n    , serverAddress : String\n    }\n\\end{verbatim}\n\nThe type of the weather field has the form\n\n\\begin{verbatim}\nMaybe Weather = Nothing | Just Weather\n\\end{verbatim}\n\nThis means that a value of type \\code{Maybe Weather} can be either \\code{Nothing}, or a value of type \\code{Just Weather}.  The  first option handles the case in which  the app has not requested information from the server, has requested information but has received no reply, has requested information but received an error message, or, finally has received garbled information.  These are all very real possibilities, and in those cases, we literally know \\code{Nothing}.\n\nIn the case of valid weather information, \\code{weather} field has type \\code{Just Weather}, where \\code{Weather} is the record type listed below. The first, \\code{id}, is an integer which identifies the weather information in the openweather.org database.  We won\'t use it now.  The next, \\code{location}, is a string which in our examples is a city name, e.g., "London."  The third, \\code{main}, is the "main" weather information for the given location.\n\n\\begin{verbatim}\ntype alias Weather =\n    { id : Int\n    , name : String\n    , main : Main\n    }\n\\end{verbatim}\n\nAnd what is the value of the field \\code{main}?  Well, it is a something of type \\code{Main}.  While we seem to be opening up a series of Russian dolls, this is the last data structure that we have to deal with.  \\code{Main} is a record  with five fields of type \\code{Float}\n\n\\begin{verbatim}\ntype alias Main =\n    { temp : Float\n    , humidity : Float\n    , pressure : Float\n    , temp_min : Float\n    , temp_max : Float\n    }\n\\end{verbatim}\n\n\\subheading{Filling out Main}\n\nThe code discussed so far is still not enough to define an app that will run, even if it does nothing.  To get to this point, we must implement the following functions and types:\n\n\\begin{enumerate}\n\\item \\code{init}, which sets jup the initial model.\n\\item \\code{Msg} The type messages the app can receive.\n\\item \\code{subscriptions}. There aren\'t any, but this has to be defined.\n\\item \\code{view} and some style information to make the view look good.\n\\item \\code{update}\n\\end{enumerate}\n\nTake a look at the Ellie below and run it to see if it works.  Then come back and we will go through the list above.  Once this is done, we can move on to making the app actaully do something.\n\n\\ellie{9CKgm5CQGa1/0}{Skeleton app}\n\n\\subheading{Finishing the skeleton}\n\nLet\'s finish the skeleton by filling in the items listed above.\n\n\\subheading{Init and Msg}\n\n\\begin{verbatim}\ninit : ( Model, Cmd Msg )\ninit =\n    ( { weather = Nothing\n      , message = "app started"\n      , location = "london"\n      , apiKey = ""\n      }\n    , Cmd.none\n    )\n\\end{verbatim}\n\n\nBelow is  \\code{init}. It is a value of type \\code{(Model, Cmd Msg)}.  The \\code{Msg} type\nis defined this way:\n\n\\begin{verbatim}\ntype Msg = NoOp\n\\end{verbatim}\n\nWe will have other Msg\'s later.  But when staring out, it is worth having a kind of "zero" in the world of messages -- a message which corresponds to "no operation."\n\n\n\\subheading{Subscriptions}\n\nWe need to define \\code{subscription} even if there are no subscriptions to external data sources. Let\'s do it like this:\n\n\\begin{verbatim}\nsubscriptions model =\n    Sub.none\n\\end{verbatim}\n\n\\subheading{Update}\n\nThe update function handles our \\code{NoOp} message:\n\n\\begin{verbatim}\nupdate : Msg -> Model -> ( Model, Cmd Msg )\nupdate msg model =\n    case msg of\n        NoOp ->\n            ( model, Cmd.none )\n\\end{verbatim}\n\nLater, the case statment will be more complex, with one\n clause for each \\code{Msg} type.\n\n\n\\subheading{View}\n\n\\image{http://noteimages.s3.amazonaws.com/jim_images/weatheApp-0.png}{}{float: right, width: 150}\n\nThe \\code{view} function represents the state of the \\code{Model}\nto the outside world.  In the case at hand, it just displays a grey box\nas in the image on the right.\n\n\\begin{verbatim}\nview : Model -> Html Msg\nview model =\n    div [ mainStyle ]\n        [ div [ innerStyle ]\n            [ text "Weather App"\n            ]\n        ]\n\\end{verbatim}\n\n\\subheading{Style}\n\nTo set the stage for our working app, we use a small bit of styling:\n\n\\begin{verbatim}\nmainStyle =\n    style\n        [ ( "margin", "15px" )\n        , ( "margin-top", "20px" )\n        , ( "background-color", "#eee" )\n        , ( "width", "200px" )\n        ]\n\ninnerStyle =\n    style [ ( "padding", "15px" ) ]\n\\end{verbatim}\n\n\n\\image{http://noteimages.s3.amazonaws.com/jim_images/weatherApp-2.png}{}{float: right, width: 200}\n\n\n\\subsection{Getting the weather}\n\n\n\nLet\'s now work to make the app retrieve weather data.  There is a cycle of events which makes this happen.  First, the user clicks on the "Get weather" button, which is defined by\n\n\\begin{verbatim}\nbutton\n   [ onClick GetWeather ]\n   [ text "Get weather" ]\n\\end{verbatim}\n\nThe \\code{onClick} action causes the message \\code{GetWeather} to be sent.  The \\code{update} function listed below receives this message, matches it using its \\code{case msg of} statement to the function call  \\code{getWeather model}, and executes that call.\n\n\\begin{verbatim}\nupdate : Msg -> Model -> ( Model, Cmd Msg )\nupdate msg model =\n    case msg of\n        GetWeather ->\n            ( model, getWeather model )\n        NewWeather (Ok newData) ->\n            ( { model | weather = Just newData,\n                        message = "Successful request" },\n                Cmd.none\n             )\n        NewWeather (Err error) ->\n            ( { model | message = "Error" }, Cmd.none )\n\n\\end{verbatim}\n\nLet\'s look at the code for \\code{getWeather}.\n\n\\begin{verbatim}\ngetWeather : Model -> Cmd Msg\ngetWeather model =\n    Http.send NewWeather (dataRequest model)\n\\end{verbatim}\n\nWhen this function call is executed the following happen.  (1)  The request \\code{ dataRequest model} is made; (2)  Moments later the server responds with its \\code{reply}, also a string. This is a string which re[renset sdh dtdata  which is just a string.  It represent the if  (3) send the message \\code{NewWeather reply}, (4) the update function processes that message.  The message can be of two kinds.  If the request is successful, it is of form \\code{Ok newData} where \\code{NewData} carries the information sent by the server.  If the request is not successful, the reply has the form \\code{Error error}, where \\code{error} carries information about the error.\n\nLet\'s  look at the code for \\code{dataRequest} listed below                                              .  The function \\code{Http.get} takes two arguments.  The first is the function call \\code{url model}, which yields a string to be sent to the server m  It carries information such as the "address" of the server, the city whose weather we want to know about, and the API key that the server requires to grant access.  The second argument is a JSON decoder.  This is a black box which will translate the information send by the server into a form understood by Elm.\n\n\\begin{verbatim}\ndataRequest model =\n    Http.get (url model) weatherDecoder\n\\end{verbatim}\n\nThe code for the \\code{url} function simply puts information already present in the model into the form needed by the server:\n\n\\begin{verbatim}\nurl model =\n  model.urlPrefix ++ model.location ++ "&APPID=" ++ model.apiKey\n\\end{verbatim}\n\n\n\n\n\\ellie{chqbtP2Kfa1/1}\n\n\\section{IIIIIII}\n\n\\image{http://noteimages.s3.amazonaws.com/jim_images/weatherApp-1a.png}{}{float: right, width: 250}\n\n\n\\ellie{8Wrq8PbCDa1/1}\n\n\\subsection{A little more advanced}\n\n\\ellie{7t43vKJnda1/5}\n\n\n',e);case 16:return p(rh,"\n\n\n\\tableofcontents\n\n\\section{MiniLatex}\n\nMiniLatex is a technology for bringing a\ndefined subset of LaTeX to the browser: a way to live-edit, render, and distribute class notes, etc.\nYou can write simple and complex formulas, as in equations \\eqref{integral} and \\eqref{fourier}.\n\n\n\\begin{equation}\n\\label{integral}\n\\int_0^1 x^n dx = \\frac{1}{n+1}\n\\end{equation}\n\n\n\\begin{equation}\n\\label{fourier}\n\\psi(x,t) = \\int_{-\\infty}^\\infty  \\left[ \\\n\\frac{1}{2\\pi}  \\int_{-\\infty}^\\infty e^{ipx} e^{ -ip^2t/2m \\hbar} e^{-ipx'} dp \\right] \\phi(x')  dx'\n\\end{equation}\n\n\n\\subsection{Images}\n\nDisplaying images is a simple matter -- just use the \\code{image} macro, which looks like\n\n\\begin{verbatim}\n  \\image{URL}{LABEL}{width 350, float: right}\n\\end{verbatim}\n\nwhere \\code{URL} is the image url.\n\n\\image{http://psurl.s3.amazonaws.com/images/jc/beats-eca1.png}{Two-frequency beats}{width: 350, float: right}\n\nOne can also display Ellies:\n\n\\ellie{qqVYtKvBxJa1}{Button App}\n\nHere is the source text:\n\n\\begin{verbatim}\n    \\ellie{qqVYtKvBxJa1}{Button App}\n\\end{verbatim}\n\n\\section{Other features}\nHyperlinks: \\href{http://lambdajam.yowconference.com.au/archive-2018/profile/?id=xavier-ho}{Generative art with Elm}\n\n\\begin{theorem} \nThere are infinitely many primes.\n\\end{theorem}\n\n\\begin{theorem} \nThere are infinitely many primes $p$\nsuch that $p \\equiv 1\\ mod\\ 4$.\n\\end{theorem}\n\n\n\\subsection{Poetry}\n\n\\begin{verse}\n’Twas brillig, and the slithy toves\n      Did gyre and gimble in the wabe:\nAll mimsy were the borogoves,\n      And the mome raths outgrabe.\n\n“Beware the Jabberwock, my son!\n      The jaws that bite, the claws that catch!\nBeware the Jubjub bird, and shun\n      The frumious Bandersnatch!”\n\nHe took his vorpal sword in hand;\n      Long time the manxome foe he sought—\nSo rested he by the Tumtum tree\n      And stood awhile in thought.\n\nAnd, as in uffish thought he stood,\n      The Jabberwock, with eyes of flame,\nCame whiffling through the tulgey wood,\n      And burbled as it came!\n\nOne, two! One, two! And through and through\n      The vorpal blade went snicker-snack!\nHe left it dead, and with its head\n      He went galumphing back.\n\n“And hast thou slain the Jabberwock?\n      Come to my arms, my beamish boy!\nO frabjous day! Callooh! Callay!”\n      He chortled in his joy.\n\n’Twas brillig, and the slithy toves\n      Did gyre and gimble in the wabe:\nAll mimsy were the borogoves,\n      And the mome raths outgrabe.\n\\end{verse}\n\n\\section{Verbatim}\n\nBelow is the type definition for MiniLatex:\n\n\\begin{verbatim}\n  type LatexExpression\n      = LXString String\n      | Comment String\n      | InlineMath String\n      | DisplayMath String\n      | Item Int LatexExpression\n      | Macro String (List LatexExpression)\n      | Environment String LatexExpression\n      | LatexList (List LatexExpression)\n\\end{verbatim}\n\n\\bigskip\n",e);case 17:return p(rh,"\n\n\\title{MiniLaTeX Grammar (Draft)}\n\n\\author{James A. Carlson}\n\n\\email{jxxcarlson at gmail}\n\n\\date{January 12, 2018}\n\n\\maketitle\n\n\\tableofcontents\n\n\n  $$\n  \\newcommand{\\dollar}{ \\text{$ \\$ $} }\n  \\newcommand{\\begg}[1]{\\text{\\begin{$#1$}}}\n  \\newcommand{\\endd}[1]{\\text{\\end{$#1$}}}\n  $$\n\n  \\section{Introduction}\n\n  In this article, we describe a formal grammar which defines the MiniLaTeX language.  MiniLaTex is a subset of LaTeX, and  text written in it can be translated into HTML by means of a suitable parser-renderer.  Because of the balanced begin-end pairs characteristic of LaTeX environments and the fact that the number of distinct such pairs is arbitrary, the grammar is not context-free.  The context sensitivity is, however, limited.  Indeed, it occurs in only in the productions for environments and tables, so that the grammatical description is \"almost EBNF.\"\n\n  The MiniLaTex parser is written in Elm.  Elm is the functional language for creating web apps developed by Evan Czaplicki, first announced in his Harvard senior thesis (2012).  The  choice of language was governed by two considerations. First, Elm provides excellent tools for creating fast, reliable web apps with a codebase that is maintainable over the long run.  This was an important consideration, since the point of MiniLaTeX is to be able to create, edit, and distribute technical documents in HTML.  The second consideration is that Elm, with its ML-flavored type system and an expressive parser combinator library, is well-suited to the task of realizing a grammar.  The resulting parser is quite compact --- just 336 lines of code as of this writing.\n\n  A second implementation of the parser in Haskell is planned in order to have additional validation of MiniLaTeX and to make it more widely available.  The Haskell parser will be released with a command-line tool for translating MiniLaTeX into HTML.\n\n  The code for the MiniLaTeX parser-renderer is open source, available on  \\href{https://github.com/jxxcarlson/minilatex}{GitHub}\n  and also as an Elm package at \\href{http://package.elm-lang.org/packages/jxxcarlson/minilatex/latest}{package.elm-lang.org} --- search for \\code{jxxcarlson/minilatex}.\n  To experiment with MiniLaTeX, try the \\href{https://jxxcarlson.github.io/app/minilatex/src/index.html}{Demo App}.  To use MiniLaTeX to create documents, try \\href{http://www.knode.io}{www.knode.io}\n\n  I am indebted to Ilias van Peer for thoughtful suggestions and specific technical help through the entire course of this project.  I would also like to thank Evan Czaplicki, who brought Elm's \\href{https://github.com/elm-tools/parser}{elm-tools/parser} package to my attention; its role is fundamental.\n\n  This document is written in MiniLaTeX and is available on the web at\n  \\href{http://www.knode.io/#@public/628}{www.knode.io/#@public/628}.\n\n\n\n  \\section{Abstract Syntax Tree}\n\n  The MeenyLatex parser accepts text as input and produces an abstract syntax tree (AST) as output.  An AST is a $LatexExpression$, as defined by the following type.\n\n  \\begin{verbatim}\n  type LatexExpression\n      = LXString String\n      | Comment String\n      | InlineMath String\n      | DisplayMath String\n      | Item Int LatexExpression\n      | Macro String (List LatexExpression)\n      | Environment String LatexExpression\n      | LatexList (List LatexExpression)\n  \\end{verbatim}\n\n  The translation from source text to abstract syntax tree is accomplished by a function in the \\code{MeenyLatex.Parser} module:\n\n  \\begin{equation}\n  parse: {\\tt String} \\rightarrow {\\tt LatexExpression}.\n  \\end{equation}\n\n  The abstract syntax tree of MiniLaTeX text carries the information\n  needed to render it either as LaTeX or as HTML. Thus one can construct functions\n\n\n  \\begin{align}\n  renderToLatex &: LatexExpression \\rightarrow String \\\\\n  renderToHtml &: LatexExpression \\rightarrow String\n  \\end{align}\n\n  One might think of the function $renderToLatex$ as an inverse of $parse$, since it reverses the role of domain and codomain.  Nonetheless, this is not the case, since one can make changes to the source text which do not affect the AST.  It is possible, however, to state a related property.  Let\n   $f = renderToLatex\\circ parse$.  This is a function \\code{String -> String}; although one cannot assert that $f = id$, one has the\n  idempotency relation $f\\circ f = f$.\n\n\n\n  \\section{Terminals and Non-Terminals}\n\n  Let us now describe the grammar, beginning with terminal and nonterminal symbols.  In the next section we list and discuss the productions of this grammar.\n\n  \\subheading{Terminals}\n\n\\begin{enumerate}\n\n  \\item $spaces \\Rightarrow sp^*$, where $sp$ is the space character.\n\n  \\item $ws \\Rightarrow \\{ sp, nl \\}^*$, where $nl$ is the newline character.\n\n  \\item $reservedWord \\Rightarrow \\{ \\backslash begin, \\backslash end, \\backslash item \\}$\n\n  \\item $word \\Rightarrow (Char - \\{sp, nl, backslash, dollarSign \\})^+$ -- Nonempty strings without whitespace characters, backslashes or dollar signs\n\n  \\item $specialWord \\Rightarrow (Char - \\{sp, nl, backslash, dollarSign, \\}, \\& \\})^+$\n\n  \\item $macroName \\Rightarrow  (Char - \\{sp, nl, , leftBrace, backslash\\})^+ - reservedWord$\n\n\\end{enumerate}\n\n  Associated with these terminals are productions $Word \\Rightarrow word$, $Identifier \\Rightarrow identifier$, etc.  We shall not list all of these, but rather just the terminal and a description of it.\n\n\n\n  \\subheading{Non-Terminals}\n\n\n  \\begin{enumerate}\n  \\item $Arg$ -- arguments for macros\n  \\item $BeginWord$ -- produce $\\begg{identifier}$ phrase for LaTeX environments.\n  \\item $Comment$ -- LaTeX comments -- \\% foo, bar\n  \\item $IMath$ -- inline mathematical text, as in $\\dollar$ ... $\\dollar$\n  \\item $DMath$ -- display mathematical text, as in $\\dollar\\dollar$ ... $\\dollar\\dollar$ or $\\backslash[\\ ... \\backslash]$.\n  \\item $Env$ -- LaTeX environments $\\begg{foo}\\ $ ... $\\endd{foo}$.\n  \\item $EnvName$ -- produce an environment name such as \\italic{foo}, or \\italic{theorem}.\n  \\item $Identifier$ -- a lowercase alphanumeric string beginning with a letter.\n  \\item $Item$ -- item in an enumeration or itemization environemnt\n  \\item $LatexExpression$ -- a union type\n  \\item $LatexList$ -- a list of LatexExpressions\n  \\item $Macro$ -- a LaTeX macro of zero or more arguments.\n  \\item $MacroName$ -- an identifier\n  \\item $Words$ -- a string obtained by joining a list of $Word$ with spaces.\n  \\end{enumerate}\n\n\n  \\section{Productions}\n\n\n\n  The MiniLaTeX grammar is defined by its productions.  This set is fairly small, just 24 if one discounts productions which could be viewed as performing lexical analysis -- the recognition of identifiers, for instance.  Of the 24 productions, 11 are for general nonterminals, 7 are for environments of various kinds, and 5 are for the tabular environment.  With two exceptions we present them in EBNF form.  The topmost productions are for $LatexList$ and $LatexExpression$:\n\n  \\begin{align}\n  \\label{Production:LatexExpression}\n  LatexList &\\Rightarrow LatexExpression^+ \\\\\n  LatexExpression &\\Rightarrow Words\\ |\\ Comment\\ |\\ IMath\\ |\\ DMath\\  \\\\\n  & \\phantom{\\Rightarrow}\\ |\\ Macro\\ |\\ Env\n  \\end{align}\n\n  The productions for the first four non-terminals on the right-hand side of \\eqref{Production:LatexExpression} are non-recursive, straightforward, and all result in a terminal.\n  The terminal is of the form $Constructor\\ x$, where the first term is a constructor for $LatexExpression$ and $x$ is a string.  When $A$ is a non-terminal, ${\\tt A}$ is the\n  corresponding constructor.\n\n\\begin{enumerate}\n\n  \\item $ Words  \\Rightarrow {\\tt LXString}\\ (join\\ Word^+) $ where a $Word$ is any sequence of characters which is not a whitespace character, $\\backslash$, or $\\dollar$, and where $join$ is the function which joins the elements of a list of strings by single spaces to produce a string.\n\n  \\item $ Comment \\Rightarrow {\\tt Comment}\\ (Char - \\{ \\text{\\n}\\})^* $\n\n  \\item $ IMath  \\Rightarrow {\\tt IMath}\\ Line'$ where $Line'$ is $Line$ with no occurernce of $\\dollar$\n\n  \\item $ DMath  \\Rightarrow {\\tt DMath}\\ Line'\\ |\\ {\\tt DMath}\\ Line'' $ | where $Line''$ is $Line$ with no occurrence of of a right bracket.\n\n\\end{enumerate}\n\n  Let us now treat the two recursive productions. They generate LaTeX macros and environments.\n\n\n  \\subsection{Macros}\n\n  \\begin{align}\n  Macro &\\Rightarrow {\\tt Macro}\\ Macroname\\ Arg^* \\\\\n  Arg &\\Rightarrow Words\\ |\\ IMath\\ |\\ Macro\n  \\end{align}\n\n\n  \\subsection{Environments}\n\n\n  Because of the use of constructions of the form\n\n  \\begin{verbatim}\n  \\begin{envName}\n  ...\n  \\end{envName}\n  \\end{verbatim}\n\n  the production of environments requires  the use of a context-sensitive grammar.\n  Here $envName$ may take on arbitrarily many values, and, in particular, values not known at the time the parser is written.  Note that the production \\eqref{production:envname} below has a nonterminal followed by a terminal on the right-hand side, while \\eqref{production:env} has a nonterminal followed by a terminal on the left-hand side.  The presence of a terminal on the left-hand side tells us that the grammar is context-sensitive. In $Env\\ identifier$, the terminal $identifier$ provides the context.\n\n  \\begin{equation}\n  \\label{production:envname}\n  EnvName \\Rightarrow Env\\ identifier\n  \\end{equation}\n\n  \\begin{align}\n  \\label{production:env}\n  Env\\ {\\rm itemize} & \\Rightarrow {\\tt Environment}\\ {\\rm itemize}\\ Item^+ \\\\\n  Env\\ {\\rm enumerate} & \\Rightarrow {\\tt Environment}\\ {\\rm enumerate}\\ Item^+\\\\\n  Env\\ {\\rm tabular} & \\Rightarrow {\\tt Environment}\\ {\\rm tabular} \\ Table \\\\\n  Env\\ passThroughIdentifier & \\Rightarrow {\\tt Environment}\\ passThroughIdentifier\\ Text \\\\\n  Env\\ genericIdentifier & \\Rightarrow {\\tt Environment}\\ genericIdentifier\\ LatexList \\\\\n  \\end{align}\n\n  The set of all $envNames$ is decomposed as follows:\n\n  \\begin{align}\n  specialIdentifier &= \\{ \\text{itemize, enumerate, tabular} \\} \\\\\n  passThroughIdentifier &= \\{ \\text{equation, align, eqnarray, verbatim, verse} \\} \\\\\n  genericIdentifier &= identifier - specialIdentifier - passThroughIdentifier\n  \\end{align}\n\n\n  \\subsection{Tabular Environment}\n\n  The tabular environment also requires a context-sensitive grammar.\n\n  \\begin{align}\n  Table &\\Rightarrow TableHead\\ (TableRows\\ ncols)^+ \\\\\n  TableRows\\ ncols &\\Rightarrow TableCells^{ncols}\n  \\end{align}\n\n\n\n",e);case 18:return E(I(e,{ai:n.a}),sh);case 19:return E(e,p(eh,Nf,Tf));case 20:return E(e,p(eh,oh,Tf));case 21:var i=n.a,o=p(hh,lh,i);return E(I(e,{ak:"Start: "+ch(o),au:i}),sh);default:var u=n.a,s=p(hh,lh,u);o=p(hh,lh,e.au);return E(I(e,{ak:"Elapsed: "+ch(s-o),a9:u}),sh)}}),mh={$:16},bh=u(function(n,e){var t=ii(e+0)+"px";return w([p(jc,"backgroundColor",n),p(jc,"color","white"),p(jc,"width",t),p(jc,"height","25px"),p(jc,"margin-right","8px"),p(jc,"font-size","9pt"),p(jc,"text-align","center"),p(jc,"border","none")])}),ph="rgb(100,100,200)",gh=Xn("button"),vh=Pn,wh=u(function(n,e){return p(vh,n,{$:0,a:e})}),$h=function(n){return p(wh,"click",qo(n))},xh={$:17},yh={$:13},kh={$:14},Th=p(Gu,w([p(jc,"margin-left","20px")]),w([(Kf=96,p(gh,A(w([$h(mh)]),p(bh,ph,Kf)),w([Xo("Example 1")]))),(Yf=93,p(gh,A(w([$h(yh)]),p(bh,ph,Yf)),w([Xo("Tech Report")]))),(Gf=93,p(gh,A(w([$h(xh)]),p(bh,ph,Gf)),w([Xo("Grammar")]))),(Jf=93,p(gh,A(w([$h(kh)]),p(bh,ph,Jf)),w([Xo("WavePacket")])))])),Lh={$:0},Mh={$:2},Eh={$:3},Sh={$:4},qh=p(Gu,w([p(jc,"margin-left","20px")]),w([(Zf=93,p(gh,A(w([$h(Eh)]),p(bh,ph,Zf)),w([Xo("Clear")]))),(Qf=93,p(gh,A(w([$h(Sh)]),p(bh,ph,Qf)),w([Xo("Restore")]))),(Vf=93,p(gh,A(w([$h(Mh)]),p(bh,ph,Vf)),w([Xo("Render")]))),(Uf=96,p(gh,A(w([$h(Lh)]),p(bh,ph,Uf)),w([Xo("Fast Render")])))])),Ih=function(n){return{$:1,a:n}},Ah=l(r(function(n,e,t,r){return w([p(jc,"width",n),p(jc,"height",e),p(jc,"padding","15px"),p(jc,"margin-left",t),p(jc,"background-color",r),p(jc,"overflow","scroll")])}),"400px","635px","20px","#eef"),_h=Vu("value"),Dh=function(n){return E(n,!0)},Rh=u(function(n,e){return p(vh,n,{$:1,a:e})}),Ch=V,jh={$:6},Xh=p(u(function(n,e){return g(Xe,Ch,e,n)}),w(["target","value"]),jh),Nh=function(n){return Nn(Bn(n))},Hh=function(n){return g(Nh,"textarea",A(Ah,w([(e=Ih,p(Rh,"input",p(Eo,Dh,p(Eo,e,Xh)))),_h(n.o)])),w([E(ii(n.i),Xo(n.o))]));var e},Ph=function(n){return p(Gu,w([p(jc,"height",ii(n)+"px"),p(jc,"clear","left")]),v)},Wh=function(n){return p(Gu,w([p(jc,"float","left")]),w([Ph(20),qh,Ph(5),Hh(n),Ph(5),Th]))},Oh=Vu("target"),zh=u(function(n,e){return p(Uu,w([as("linkback"),p(jc,"float","right"),p(jc,"margin-right","10px"),Qu(n),Oh("_blank")]),w([Xo(e)]))}),Bh=function(n){return w([p(jc,"width","990px"),p(jc,"height","20px"),p(jc,"margin-left","20px"),p(jc,"margin-bottom","-16px"),p(jc,"padding","8px"),p(jc,"clear","left"),p(jc,"background-color",n),p(jc,"color","#eee")])},Fh=function(n){var e;return A(ii((e=n.o,qi(p(Jt," ",e))))+" words, ",ii(at(n.o))+" characters")},Jh=function(n){return p(Gu,Bh("#777"),w([Xo(Fh(n)),p(jo,w([p(jc,"margin-left","4em")]),w([Xo(n.ak)])),p(zh,"http://jxxcarlson.github.io","jxxcarlson.github.io")]))},Gh=p(Gu,Bh("#555"),w([p(jo,w([p(jc,"margin-left","5px")]),w([Xo("MiniLatex Demo II")])),p(zh,"http://www.knode.io","www.knode.io")])),Yh=function(n){var e=n.aa,t=n.C;return g(lc,u(function(n,e){return g(Nh,"p",w([zs(e)]),w([E(e,n)]))}),e,t)},Kh=function(n){return p(Gu,v,p(_t,function(n){return p(Gu,w([p(jc,"margin-bottom","0.65em")]),w([n]))},Yh(n.A)))},Uh="#444",Vh=u(function(n,e){switch(n.q){case 0:return p(gh,p(bh,Uh,e),w([Xo("Basic")]));case 1:return p(gh,p(bh,Uh,e),w([Xo("Parse results")]));case 2:return p(gh,p(bh,Uh,e),w([Xo("Raw HTML")]));default:return p(gh,p(bh,Uh,e),w([Xo("Latex (2)")]))}}),Qh={$:11},Zh=u(function(n,e){return n.aj?p(gh,A(w([$h(Qh)]),p(bh,"#88a",e)),w([Xo("Horizontal")])):p(gh,A(w([$h(Qh)]),p(bh,ph,e)),w([Xo("Horizontal")]))}),nl={$:12},el=u(function(n,e){return 1===n.aj?p(gh,A(w([$h(nl)]),p(bh,ph,e)),w([Xo("Vertical")])):p(gh,A(w([$h(nl)]),p(bh,"#88a",e)),w([Xo("Vertical")]))}),tl=l(r(function(n,e,t,r){return w([p(jc,"width",n),p(jc,"height",e),p(jc,"padding","15px"),p(jc,"margin-top","0"),p(jc,"margin-left",t),p(jc,"background-color",r),p(jc,"overflow","scroll")])}),"400px","600px","20px","#eee"),rl=function(n){return p(Gu,w([p(jc,"float","left")]),w([Ph(20),(e=n,p(Gu,w([p(jc,"margin-left","20px"),p(jc,"margin-top","0")]),w([p(Vh,e,190),p(Zh,e,90),p(el,e,90)]))),Ph(5),p(Ds,tl,w([Xo("NOT IMPLEMENTED")]))]));var e},al=function(n){return p(Gu,w([p(jc,"float","left")]),w([Ph(20),(e=n,p(Gu,w([p(jc,"margin-left","20px"),p(jc,"margin-top","0")]),w([p(Vh,e,190)]))),Ph(5),function(n){Yh(n.A);return p(Ds,tl,w([Xo("Not currently available")]))}(n)]));var e},il=function(n){return g(Uo,"#","\\#",g(Uo,"_","\\_",n))},ol=u(function(n,e){return p(ai,Kt("xxx"),p(ci,n,e))}),ul=t(function(n,e,t){return"\\imagecenter{"+n+"}{"+e+"}{"+t+"}"}),sl=t(function(n,e,t){return"\\imagefloatleft{"+n+"}{"+e+"}{"+t+"}"}),cl=t(function(n,e,t){return"\\imagefloatright{"+n+"}{"+e+"}{"+t+"}"}),fl=function(n){return""},hl=function(n){var e=p(Nr,n,Il());return e.$?Sl(n):e.a},ll=function(n){switch(n.$){case 1:var e=n.a;return"% "+e+"\n";case 6:var t=n.a,r=n.b,a=n.c;return g(Tl,t,r,a);case 5:t=n.a,r=n.b,a=n.c;var i=n.d;return l(Ml,t,r,a,i);case 2:var o=n.a,u=n.b;return p(xl,o,u);case 3:return" $"+(e=n.a)+"$ ";case 4:return"$$"+(e=n.a)+"$$";case 7:t=n.a,a=n.b;var s=n.c;return g(vl,t,a,s);case 8:a=n.a;return yl(a);case 0:return e=n.a;default:var c=n.a;return p(yr,"; ",p(_t,Oo,c))}},dl=u(function(n,e){return ri(ll(p(ol,n,e)))}),ml=function(n){return p(yr,"",p(_t,function(n){return"{"+n+"}"},p(_t,il,p(_t,ll,n))))},bl=function(n){return p(yr,"",p(_t,function(n){return"{"+n+"}"},p(_t,il,p(_t,ll,n))))},pl=u(function(n,e){return" \\code"+(Ll(n)+bl(e))}),gl=t(function(n,e,t){var r=ri(ll(t));return"\\begin{"+n+"}"+ml(e)+"\n"+r+"\n\\end{"+n+"}\n"}),vl=t(function(n,e,t){var r=p(Nr,n,ql());return r.$?g(gl,n,e,t):(0,r.a)(t)}),wl=u(function(n,e){return" \\href"+El(e)}),$l=function(n){var e,t,r=p(dl,0,n),a=p(dl,1,n),i=(e=p(Jt,"/",r),t=qi(e),"image/"+p(ai,"xxx",Ca(p(si,t-1,e)))),o=p(dl,2,n),u=Ts(o),s=2.5*u.ax,c=ch(s)+"px",f=E(u.bt,u.bg);switch(f.a){case"left":return g(sl,i,a,c);case"right":return g(cl,i,a,c);default:return f.b,g(ul,i,a,c)}},xl=u(function(n,e){return"\\item "+ll(e)+"\n\n"}),yl=function(n){return Yo(p(_t,ll,n))},kl=function(n){var e=ll(n);return"\n\\begin{verbatim}\n"+ou(e)+"\n\\end{verbatim}\n"},Tl=t(function(n,e,t){return g(hl,n,e,t)}),Ll=function(n){return p(yr,"",p(_t,function(n){return"["+n+"]"},p(_t,ll,n)))},Ml=r(function(n,e,t,r){return" \\"+n+Ll(e)+ml(t)+" "+ll(r)+"\n\n"}),El=function(n){var e=function(n){if(n.b){n.a;var e=n.b;return nt(e)}return et}(n),t=p(Ka,bl,e),r=Ca(n),a=E(p(Ka,ll,r),t);return a.a.$||a.b.$?"":"{"+a.a.a+"}"+a.b.a},Sl=t(function(n,e,t){return" \\"+(n+(Ll(e)+ml(t)))});function ql(){return la(w([E("listing",function(n){return kl(n)}),E("useforweb",function(n){return fl(n)})]))}function Il(){return la(w([E("image",u(function(n,e){return $l(e)})),E("code",u(function(n,e){return p(pl,n,e)})),E("href",u(function(n,e){return p(wl,n,e)}))]))}var Al=ql();ql=function(){return Al};var _l=Il();Il=function(){return _l};var Dl,Rl=r(function(n,e,t,r){return w([p(jc,"width",n),p(jc,"height",e),p(jc,"padding","15px"),p(jc,"margin-top","20px"),p(jc,"margin-left",t),p(jc,"background-color",r),p(jc,"overflow","scroll")])}),Cl=l(Rl,"400px","600px","20px","#eee"),jl=function(n){var e,t=(e=n.o,g(Re,u(function(n,e){return e+(n+"\n\n")}),"",p(_t,yl,p(_t,Ea,Yt(e)))));return p(Ds,Cl,w([Xo(t)]))},Xl=u(function(n,e){return p(gh,A(p(bh,Uh,e),w([p(jc,"margin-left","20px")])),w([Xo(n)]))}),Nl=function(n){return p(Gu,w([p(jc,"float","left")]),w([Ph(20),p(Xl,"Text parsed and rendered back to LaTeX (Almost Identity)",400),Ph(5),jl(n),Ph(5),p(Gu,w([p(jc,"margin-left","20px")]),v)]))},Hl=l(Rl,"545px","670px","40px","#eee"),Pl=function(n){var e,t,r,a;switch(n.q){case 0:return a=n,p(Gu,w([p(jc,"float","left")]),w([Gh,Wh(a),g(Nh,"div",Hl,w([E(ii(a.i),Kh(a))])),Ph(5),Jh(a)]));case 1:return r=n,p(Gu,w([p(jc,"float","left")]),w([Gh,Wh(r),Kh(r),rl(r),Ph(5),Jh(r)]));case 2:return t=n,p(Gu,w([p(jc,"float","left")]),w([Gh,Wh(t),Kh(t),al(t),Ph(5),Jh(t)]));default:return e=n,p(Gu,w([p(jc,"float","left")]),w([Gh,Wh(e),Kh(e),Nl(e),Ph(5),Jh(e)]))}},Wl=Ze,Ol=function(n){for(;;){n=n}},zl=J,Bl=B,Fl=i(function(n,e,t,r,a,i){return{aK:i,aN:e,aW:r,aY:t,a$:n,a0:a}}),Jl=a(function(n,e,t,r,a){if(gt(a)||p(Bl,"@",a))return et;var i=p(zl,":",a);if(i.b){if(i.b.b)return et;var o=i.a,u=hi(p(jr,o+1,a));if(1===u.$)return et;var s=u;return nt(h(Fl,n,p(Zi,o,a),s,e,t,r))}return nt(h(Fl,n,a,et,e,t,r))}),Gl=r(function(n,e,t,r){if(gt(r))return et;var a=p(zl,"/",r);if(a.b){var i=a.a;return $(Jl,n,p(jr,i,r),e,t,p(Zi,i,r))}return $(Jl,n,"/",e,t,r)}),Yl=t(function(n,e,t){if(gt(t))return et;var r=p(zl,"?",t);if(r.b){var a=r.a;return l(Gl,n,nt(p(jr,a+1,t)),e,p(Zi,a,t))}return l(Gl,n,et,e,t)}),Kl=(u(function(n,e){if(gt(e))return et;var t=p(zl,"#",e);if(t.b){var r=t.a;return g(Yl,n,nt(p(jr,r+1,e)),p(Zi,r,e))}return g(Yl,n,et,e)}),Z),Ul={$:2},Vl=xe({bx:function(n){var e=Sa(pf),t=p(bf,0,pf);return E({q:0,i:0,A:t,aL:p(_t,Oe,e),ai:"NOT IMPLEMENTED",aj:0,ak:"",aq:e,F:0,o:pf,bJ:pf,au:kf(0),a9:kf(0),bS:n.ah,bT:n.ax},p(Rf,gf,p(jf,1,1e4)))},bM:function(n){return Xf},bP:dh,bR:function(n){return p(Gu,w([p(jc,"width",function(n){switch(n){case 0:return"1100px";case 3:case 1:default:return"1350px"}}(n.q)),p(jc,"margin","auto")]),w([Pl(n)]))}});Dl={Main:{init:Vl(p(Kl,function(e){return p(Kl,function(n){return qo({ah:n,ax:e})},p(Ch,"height",Ul))},p(Ch,"width",Ul)))(0)}},n.Elm?function n(e,t){for(var r in t)r in e?"init"==r?C(6):n(e[r],t[r]):e[r]=t[r]}(n.Elm,Dl):n.Elm=Dl}(this);